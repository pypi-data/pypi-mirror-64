testcase:
  id: sd-wan.path_selection.001
  name: 'sd-wan_path_selection_l2_to_l4_steering'
  description: 'SD-WAN Path selection L2 to L4 steering'
  objective: 'Validate DUT is able to steer traffic among WAN links by using traditional L2/L3/L4 traffic classification method.'
  run_info:
    equipment:
      - type: pga
        count: 3
      - type: router
        count: 1
    duration: 420
    timeout: 1200
    testbed: testpacks/sd-wan/testbed_templates/4stc_2dut_type01.yaml
    script_module: testpacks.sd-wan.path_selection_l2_to_l4_steering
    script_class: PathSelectionL2ToL4Steering
    procedure: '1. Perform ARP on all STC devices and all stream blocks  2. Start traffic on all STC ports 3. Wait for traffic to stop 4. Check stream related results'
    initial_config: '1. Set IpAddress for interface of DutToClient to 150.0.0.2  2. Set IpAddress for interface of DutToMpls to 150.0.1.2 3. Set IpAddress for interface of DutToInternet to 150.0.2.2 3. Proper policies must be applied to DUT to steer stream 1, 4, 5, 7 towards Internet link and steer stream 2, 3, 6 ,8 towards MPLS link.'
    expected_results: '1. All ARPs are resolved successfully for procedure 1  2.All generators are started successfully 3. All stream blocks are steered towards expected link without packet loss. 4. a. Stream 1, 4, 5, 7 are received only on Internet STC port b. Stream 2, 3, 6, 8 are received only on MPLS port c. No packet loss or duplication'
  owner:
    name: 'Samuel Yuan'
  version: 'Draft 0.1'
  test_type: [functional]
  test_area: 'sd-wan path selection'
  dut_target: [sd-wan]
  test_suites: [smoke]