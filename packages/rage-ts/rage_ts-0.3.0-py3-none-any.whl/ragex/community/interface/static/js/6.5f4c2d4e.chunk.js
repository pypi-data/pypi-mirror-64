(this["webpackJsonprasa-interface"]=this["webpackJsonprasa-interface"]||[]).push([[6],{1605:function(e,r,t){"use strict";t.r(r);var n=t(0),a=t(33),l=t(2),o=t(164),s=t(120),c=t(85),u=t(69),i=t(1),f=t(104),d=t(43),m=t(12),h=t(29),v=t(6),w=t(80),y=t(207),R=t(147),E=t(14),b=t(10),p=t(132);function x(e){var r=e.onDelete,t=e.onLoadMoreRows,a=e.onSaveUserRoles,l=e.onSearch,o=e.roles,s=e.searchQuery,c=e.total,u=e.roleTotals,f=e.unfilteredTotal,x=e.userRoles,k=e.users,D=n.useCallback((function(e,r){return n.createElement(y.a,{p:4,name:"Roles",items:o.map((function(e){return e.role})),checkedItems:e.filter((function(e){return"role"===e.keyword})).map((function(e){return e.value})),onChange:function(t){return r(e.filter((function(e){return"role"!==e.keyword})).concat(t.map((function(e){return{keyword:"role",value:e,negated:!1}}))))}})}),[o]),T=n.useMemo((function(){return{keyword:"role",values:o.map((function(e){return{label:e.role,total:u[e.role]||0}})),clear:!0,all:"All",total:f}}),[o,u,f]),g=n.useCallback((function(e){var r=e.selected,t=e.onChangeSelected;return function(e){var a=e.rowIndex,l=e.rowData;if(!l)return null;var o=r.includes(a);return n.createElement(i.Flex,{alignItems:"center"},n.createElement(i.Box,{flex:"0 1 auto",mr:3},n.createElement("label",null,n.createElement(w.a,{checked:o,onChange:function(){return t(a,!o)}}))),n.createElement(i.Box,{flex:"1",style:{overflow:"hidden",textOverflow:"ellipsis"}},n.createElement(E.a,{variant:"body.secondary"},l.username)))}}),[]),C=function(e){var r=e.cache;return function(e){var t=e.rowData,l=e.parent,s=e.rowIndex,c=t;if(!c)return null;var u=o.map((function(e){return{label:e.role,value:e.role,data:e}})),i=(x[c.username]||[]).map((function(e){return{label:e.role,value:e.role,data:e}}));return n.createElement(d.b,{cache:r,columnIndex:1,parent:l,rowIndex:s},n.createElement(p.a,{isMulti:!0,placeholder:"Unassigned",options:u,onChange:function(e){return Array.isArray(e)&&a({user:c,roles:e.map((function(e){return e.data}))})},value:i}))}},U=function(e){var t=e.onResetCache;return function(e){var a=e.rowData;return a?n.createElement(i.Flex,{flexDirection:"row-reverse",mr:-1},n.createElement(h.a,{resource:m.c.Users,action:m.a.Delete,yes:n.createElement(v.a,{mr:1,variant:"icon",onClick:function(){r([a]),t()}},n.createElement(b.a,{icon:"trash-alt"}))})):null}};return n.createElement(R.a,{bulkActionsRenderer:function(e){var t=e.dataSelected,a=e.setSelected;return n.createElement(h.a,{resource:m.c.Users,action:m.a.Delete,yes:n.createElement(v.a,{onClick:function(){r(t),a([])},variant:"inverse"},"Delete")})},data:k,filtersRenderer:D,quickFilters:T,onLoadMoreRows:t,onSearch:l,resource:m.c.User,searchQuery:s,total:c},(function(e){return[n.createElement(d.d,{key:"model",cellDataGetter:function(){},flexGrow:2,width:300,dataKey:"username",label:"User",className:"ReactVirtualized__Table__rowColumn_overflow",cellRenderer:g(e)}),n.createElement(d.d,{key:"type",cellDataGetter:function(){},flexGrow:3,width:450,dataKey:"roles",label:"Roles",cellRenderer:C(e)}),n.createElement(d.d,{key:"actions",cellDataGetter:function(){},flexGrow:1,width:150,dataKey:"username",className:"ReactVirtualized__Table__rowColumnOnHover",label:"",cellRenderer:U(e)})]}))}function k(e){var r=e.onDelete,t=e.onFetchRoles,a=e.onFetchUsers,l=e.onLoadMoreRows,o=e.onSaveUserRoles,s=e.roles,c=e.roleTotals,u=e.searchQuery,d=e.total,m=e.userRoles,h=e.users,v=e.unfilteredTotal;n.useEffect((function(){a({search:u,offset:0,limit:20}),t({search:"",offset:0,limit:0})}),[t,a,u]);var w=n.useCallback((function(e){return a({search:e,offset:0,limit:20})}),[a]),y=Object.values(s);return n.createElement(f.a,{title:"Users"},n.createElement(i.Flex,{flexDirection:"column",style:{height:"100%"}},n.createElement(i.Box,{flex:"1"},n.createElement(x,{roles:y,userRoles:m,total:d,roleTotals:c,users:h,unfilteredTotal:v,onDelete:r,onLoadMoreRows:l,onSearch:w,searchQuery:u,onSaveUserRoles:o}))))}var D={onFetchUsers:c.c.request,onDelete:c.a.request,onFetchRoles:u.d.request,onSaveUserRoles:c.e.request};r.default=Object(a.b)((function(e){return{users:e.users.users,total:e.users.total,roleTotals:e.users.roleTotals,searchQuery:e.users.searchQuery,userRole:e.auth.role,userRoles:e.users.userRoles,roles:e.roles.roles,unfilteredTotal:e.users.unfilteredTotal}}),D)((function(e){return n.createElement(o.a,{listener:s.b,start:Object(l.getType)(c.c.request),resolve:Object(l.getType)(c.c.success),reject:Object(l.getType)(c.c.failure)},(function(r){return n.createElement(k,Object.assign({},e,{onLoadMoreRows:r}))}))}))}}]);