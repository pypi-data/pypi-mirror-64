(this["webpackJsonptina-talk-admin"]=this["webpackJsonptina-talk-admin"]||[]).push([[11],{976:function(e,t,n){},999:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(25),l=n(10),c=n(20),i=n(7),s=n(300),u=n.n(s),p=n(38),m=n.n(p),d="[RESPONSE TEMPLATE] GET INTENTS LIST",g="[RESPONSE TEMPLATE] GET TEMPLATE DATA",f="[RESPONSE TEMPLATE] ADD TEMPLATE",b="[RESPONSE TEMPLATE] CLEAR INTENT",E="[RESPONSE TEMPLATE] CHANE RESPONSE TITLE",y="[RESPONSE TEMPLATE] CHANE CONTENT TYPE",v="[RESPONSE TEMPLATE] CHANE USE YN",_="[RESPONSE TEMPLATE] REMOVE TEMPLATE FROM ARRAY",h="[RESPONSE TEMPLATE] CHANGE TEXT",x="[RESPONSE TEMPLATE] ADD IMAGE",O="[RESPONSE TEMPLATE] UPDATE IMAGE",T="[RESPONSE TEMPLATE] REMOVE IMAGE",j="[RESPONSE TEMPLATE] ADD BUTTON",I="[RESPONSE TEMPLATE] UPDATE BUTTON",S="[RESPONSE TEMPLATE] REMOVE BUTTON",k="http://10.62.130.54:5002",N=k+"/api/projects/default",w=k+"/image/projects/default",P=k+"/image";function C(e){var t=m.a.get(N+"/response/".concat(e));return function(n){return t.then(function(t){return n({type:g,payload:t.data,intent:e})}).catch(function(e){return console.log("getTemplateFromIntents() error : ",e),null})}}function B(e,t,n,a,o,r){return"INSERT"===r?m.a.post(N+"/response",{intent:e,use_yn:t,response_template:n,response_title:a,content_type:o}):"UPDATE"===r?m.a.put(N+"/response",{intent:e,use_yn:t,response_template:n,response_title:a,content_type:o}):void 0}function A(e){var t=new FormData;return t.append("file",e[0]),m.a.post(w+"/upload_image",t)}function R(e,t,n,a){return{type:x,content_id:e,payload:{image_id:t,image_path:n,image_text:a}}}var D=n(3),M=n(132),L=n(890),z=n(956),W=n(171),U=n(880),F=n(834),G=n(878),H=n(885),Y=Object(z.a)(function(e){return{toolbar:e.mixins.toolbar,contentWrapper:{display:"flex",flexDirection:"column",height:"100%",zIndex:10,background:"linear-gradient(to bottom, ".concat(Object(W.fade)(e.palette.background.paper,.8)," 0,").concat(Object(W.fade)(e.palette.background.paper,.6)," 20%,").concat(Object(W.fade)(e.palette.background.paper,.8),")")},listItem:{color:"inherit!important",textDecoration:"none!important",height:40,width:"calc(100% - 16px)",borderRadius:"0 20px 20px 0",paddingLeft:4,"&.active":{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText+"!important",pointerEvents:"none","& .list-item-icon":{color:"inherit"}},"& .list-item-icon":{fontSize:16,width:16,height:16,marginRight:16}}}});var J=o.a.memo(function(e){var t=e.project_id,n=Y(),r=Object(i.c)(function(e){return e.responseTemplate.responseTemplateReducer.intents});console.log("[IntentList] intents : ",r);var l=Object(i.b)();return Object(a.useEffect)(function(){return l(function(){var e=m.a.get(N+"/intents");return function(t){return e.then(function(e){return t({type:d,payload:e.data})}).catch(function(e){return console.log("getIntents() error : ",e),null})}}()),function(){l({type:b})}},[t,l]),0===r.length?o.a.createElement("div",{className:Object(D.a)(n.contentWrapper,"z-10")},o.a.createElement("div",{className:"flex flex-col flex-1 items-center justify-center p-24"},o.a.createElement(M.a,{variant:"caption",className:"my-24"},"\uc870\ud68c\ub0b4\uc5ed \uc5c6\uc74c"))):o.a.createElement("div",null,o.a.createElement("div",{className:n.toolbar}),o.a.createElement(L.a,null),o.a.createElement(U.a,null,function(e){var t=e.reduce(function(e,t){var n=t.intent,a=t.response_type;return e[n]?e[n].push(a):e[n]=[a],e},{}),n=Object.entries(t).reduce(function(e,t){var n=Object(c.a)(t,2),a=n[0],o=n[1];return e.push({intent:a,response_type:o}),e},[]),a=[];return u.a.forEach(n,function(e,t){a.push({intent:e.intent})}),a}(r).map(function(e,t){return o.a.createElement(F.a,{button:!0,key:e.intent,className:n.listItem,onClick:function(t){l(C(e.intent))}},o.a.createElement(G.a,{className:"list-item-icon",color:"action"},"question_answer"),o.a.createElement(H.a,{primary:e.intent,disableTypography:!0}))})))}),V=n(921),q=n.n(V),X=n(922),K=n(920),Q=n(941),Z=n.n(Q),$=n(12),ee=n(898),te=n(992),ne=n(832),ae=n(919),oe=n.n(ae),re=Object(z.a)(function(e){return{formControl:{width:"100%"}}});var le=o.a.memo(function(e){var t=e.image_id,n=(e.image_path,e.image_text),r=e.onChangeImageText,l=e.onDeleteImageText,i=re(),s=Object(a.useState)(""),u=Object(c.a)(s,2),p=u[0],m=u[1],d=void 0!==n?n:"";return Object(a.useEffect)(function(){m(d)},[d]),o.a.createElement("div",null,o.a.createElement(U.a,{dense:!1,disablePadding:!0},o.a.createElement(F.a,null,o.a.createElement(ee.a,{className:i.formControl,variant:"filled",placeholder:"\uc774\ubbf8\uc9c0 \ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694.",autoComplete:"off",key:t,size:"small",value:p,onChange:function(e){return function(e){var n;m(e.target.value),n=e.target.value,r(t,n)}(e)}}),o.a.createElement(te.a,null,o.a.createElement(ne.a,{edge:"end","aria-label":"delete",onClick:function(){window.confirm("\ud574\ub2f9 \uc774\ubbf8\uc9c0 \ub0b4\uc6a9\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&l(t)}},o.a.createElement(oe.a,{color:"error"}))))))}),ce=n(828),ie=n(843),se=Object(z.a)(function(e){return{formControl:{width:"100%"}}});var ue=o.a.memo(function(e){var t=e.button_id,n=e.button_class,r=e.button_text,l=e.button_payload,s=e.onChangeButton,u=e.onDeleteButton,p=se(),m=Object(i.c)(function(e){return e.responseTemplate.responseTemplateReducer.intents});console.log(m);var d=Object(a.useState)(""),g=Object(c.a)(d,2),f=g[0],b=g[1],E=Object(a.useState)(""),y=Object(c.a)(E,2),v=y[0],_=y[1],h=Object(a.useState)(""),x=Object(c.a)(h,2),O=x[0],T=x[1],j=void 0!==r?r:"",I=void 0!==l?l:"",S=void 0!==n?n:"";Object(a.useEffect)(function(){b(j),_(I),T(S)},[j,I,S]);var k=function(e,n){var a=f,o=v,r=O;1===n?(b(e.target.value),a=e.target.value):2===n?(_(e.target.value),o=e.target.value):3===n&&(T(e.target.value),r=e.target.value),s(t,a,o,r)};return o.a.createElement("div",null,o.a.createElement(U.a,{dense:!1,disablePadding:!0},o.a.createElement(F.a,null,o.a.createElement(ee.a,{required:!0,variant:"filled",placeholder:"\ubc84\ud2bc\uba85\uc744 \uc785\ub825\ud558\uc138\uc694.",autoComplete:"off",key:t,size:"small",value:f,onChange:function(e){return k(e,1)},style:{minWidth:"120px"}}),o.a.createElement(ce.a,{variant:"filled",className:p.formControl},o.a.createElement(ie.a,{native:!0,labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:v,onChange:function(e){return k(e,2)}},m&&m.map(function(e,t){return o.a.createElement("option",{key:t,value:"/"+e.intent},"/"+e.intent)}))),o.a.createElement(ce.a,{variant:"filled",className:p.formControl},o.a.createElement(ie.a,{native:!0,labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:O,onChange:function(e){return k(e,3)}},o.a.createElement("option",{value:""},"\uc120\ud0dd\uc548\ud568"),o.a.createElement("option",{value:"btnBoldRed"},"btnBoldRed"),o.a.createElement("option",{value:"btnBoldBlue"},"btnBoldBlue"),o.a.createElement("option",{value:"btnBoldGreen"},"btnBoldGreen"))),o.a.createElement(te.a,null,o.a.createElement(ne.a,{edge:"end","aria-label":"delete",onClick:function(){window.confirm("\ud574\ub2f9 \ubc84\ud2bc\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&u(t)}},o.a.createElement(oe.a,{color:"error"}))))))}),pe=n(917),me=n(967),de=n.n(me),ge=n(972),fe=n.n(ge),be=n(971),Ee=n.n(be),ye=n(973),ve=n.n(ye),_e=n(840),he=n(903),xe=n(927),Oe=n.n(xe);function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(n,!0).forEach(function(t){Object(l.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ie(){var e=Object(K.a)(["\n  /* margin: 0 12px 0 0; */\n  padding: 12px;\n  border-radius: 4px;\n  border: 1px solid #dee2e6;\n  /* width: 290px; */\n  width: 100%;\n  outline: none;\n  font-size: 14px;\n  box-sizing: border-box;\n  margin-bottom: 4px;\n"]);return Ie=function(){return e},e}var Se=pe.a.input(Ie()),ke=Object(z.a)(function(e){return{formControl:{margin:e.spacing(1),minWidth:120}}});var Ne=o.a.memo(function(e){var t=e.content_id,n=e.response_type,r=e.text,l=e.images,s=e.buttons,u=ke(),p=Object(i.b)(),m=Object(a.useState)([]),d=Object(c.a)(m,2),g=d[0],f=d[1],b=Object(a.useState)([]),E=Object(c.a)(b,2),y=E[0],v=E[1],x=Object(a.useState)([]),k=Object(c.a)(x,2),N=k[0],w=k[1],C=Object(i.c)(function(e){return e.responseTemplate.responseTemplateReducer.selectedIntent.intent}),B=Object(a.useState)({content_id:t,response_type:n,text:r,images:l,buttons:s}),D=Object(c.a)(B,2),z=D[0],W=D[1];Object(a.useEffect)(function(){W(je({},z,{content_id:t,response_type:n,text:r,images:l,buttons:s})),l.length>0?v(l):v([]),s.length>0?w(s):w([])},[t,n,r,l,s]);var U=function(e){W(je({},z,{text:e.target.value})),p(function(e,t){return{type:h,content_id:e,payload:t}}(z.content_id,e.target.value))},F=function(e){window.confirm("\ud574\ub2f9 \ud15c\ud50c\ub9bf \uc720\ud615\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&p(function(e){return{type:_,payload:e}}(z.content_id))},G=function(e,t){console.log("[onChangeImageText] imageState : ",y),console.log("[onChangeImageText] image_id : ",e),console.log("[onChangeImageText] image_text : ",t);var n=y.map(function(n){return n.image_id===e?je({},n,{image_text:t}):n});console.log("update : ",n),v(n),p({type:O,payload:{image_id:e,image_text:t}})},H=function(e){console.log("[onDeleteImageText] imageState : ",y),console.log("[onDeleteImageText] image_id : ",e);var t=y.filter(function(t){return t.image_id!==e});console.log("update : ",t),v(t),p({type:T,payload:e})},Y=function(e,t,n,a){console.log("[onChangeButton] buttonState : ",N),console.log("[onChangeButton] button_id : ",e),console.log("[onChangeButton] button_text : ",t),console.log("[onChangeButton] button_payload : ",n),console.log("[onChangeButton] button_class : ",a);var o=N.map(function(o){return o.button_id===e?je({},o,{button_text:t,button_payload:n,button_class:a}):o});console.log("update : ",o),w(o),p({type:I,payload:{button_id:e,button_class:a,button_text:t,button_payload:n}})},J=function(e){console.log("[onDeleteButton] buttonState : ",N),console.log("[onDeleteButton] button_id : ",e);var t=N.filter(function(t){return t.button_id!==e});console.log("update : ",t),w(t),p({type:S,payload:e})};return o.a.createElement("div",{style:{width:"100%",border:"dashed 1px",padding:"8px",marginBottom:"10px"}},o.a.createElement("div",{style:{height:"34px"}},"\xa0",o.a.createElement(ne.a,{style:{float:"right",padding:"2px"},"aria-label":"delete",color:"default",onClick:function(e){return F()}},o.a.createElement(Ee.a,null))),o.a.createElement(L.a,null),o.a.createElement(M.a,{variant:"body1"},"\ud15c\ud50c\ub9bf \uc720\ud615"," ",o.a.createElement(fe.a,{style:{verticalAlign:"middle"},fontSize:"small",color:"error"})),o.a.createElement(ce.a,{variant:"filled",disabled:!0,className:u.formControl},o.a.createElement(_e.a,{id:"demo-simple-select-filled-label"},"\ud15c\ud50c\ub9bf \uc720\ud615"),o.a.createElement(ie.a,{native:!0,labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:z&&z.response_type},o.a.createElement("option",{value:""},"\uc120\ud0dd\ud558\uc138\uc694"),o.a.createElement("option",{value:"T"},"Only Text"),o.a.createElement("option",{value:"I"},"Only Images"),o.a.createElement("option",{value:"B"},"Only Buttons"),o.a.createElement("option",{value:"TI"},"Text + Images"),o.a.createElement("option",{value:"TB"},"Text + Buttons"),o.a.createElement("option",{value:"TIB"},"Text + Images + Buttons"))),o.a.createElement(M.a,{variant:"body1"},"\ud14d\uc2a4\ud2b8 \ub0b4\uc6a9"),o.a.createElement(Se,{placeholder:"\ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694.",autoFocus:!0,value:z&&z.text,onChange:function(e){return U(e)}}),"I"===z.response_type||"TI"===z.response_type||"TIB"===z.response_type?o.a.createElement(o.a.Fragment,null,g.length>0?o.a.createElement(ne.a,{style:{float:"right",padding:"8px"},"aria-label":"delete",color:"default",onClick:function(){if(console.log("[onUploadImageFiles] pictures : ",g),0!==g.length){if(window.confirm("\uc120\ud0dd\ub41c \uc774\ubbf8\uc9c0\ub97c \uc5c5\ub85c\ub4dc \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){for(var e=0;e<g.length;e++){(function(){var e=Object(X.a)(q.a.mark(function e(){var n;return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A(g);case 3:if(n=e.sent,console.log("[fetchUpload] response : ",n.data),""===n.data){e.next=10;break}console.log("\ud30c\uc77c \uc5c5\ub85c\ub4dc \uc644\ub8cc"),p(R(t,Z()(),P+"/"+n.data.filename,"")),e.next=13;break;case 10:return f([]),alert("\ud30c\uc77c \uc5c5\ub85c\ub4dc \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud558\uc600\uc2b5\ub2c8\ub2e4."),e.abrupt("return");case 13:e.next=21;break;case 15:return e.prev=15,e.t0=e.catch(0),f([]),console.log("err: ",e.t0),alert("\ud30c\uc77c \uc5c5\ub85c\ub4dc \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud558\uc600\uc2b5\ub2c8\ub2e4."),e.abrupt("return");case 21:case"end":return e.stop()}},e,null,[[0,15]])}));return function(){return e.apply(this,arguments)}})()()}f([])}}else alert("\uc120\ud0dd\ub41c \uc774\ubbf8\uc9c0\uac00 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")}},o.a.createElement(ve.a,null)):null,o.a.createElement(M.a,{variant:"body1"},"\uc774\ubbf8\uc9c0 \uc124\uc815"," ",o.a.createElement(fe.a,{style:{verticalAlign:"middle"},fontSize:"small",color:"error"})),o.a.createElement(de.a,{buttonText:"\uc774\ubbf8\uc9c0\ub97c \uc120\ud0dd\ud558\uc138\uc694.",withIcon:!0,onChange:function(e,t){console.log("[onChangeImageFiles] pictures : ",g),f(e)},imgExtension:[".jpg",".gif",".png",".gif"],maxFileSize:5242880,withPreview:!0})):null,("I"===z.response_type||"TI"===z.response_type||"TIB"===z.response_type)&&y.length>0&&y.map(function(e){return o.a.createElement(le,{key:e.image_id,image_id:e.image_id,image_path:e.image_path,image_text:e.image_text,onChangeImageText:G,onDeleteImageText:H})}),"B"===z.response_type||"TB"===z.response_type||"TIB"===z.response_type?o.a.createElement(M.a,{variant:"body1"},"\ubc84\ud2bc \uc124\uc815"," ",o.a.createElement(fe.a,{style:{verticalAlign:"middle"},fontSize:"small",color:"error"})):null,("B"===z.response_type||"TB"===z.response_type||"TIB"===z.response_type)&&N.length>0&&N.map(function(e){return o.a.createElement(ue,{key:e.button_id,button_id:e.button_id,button_class:e.button_class,button_text:e.button_text,button_payload:e.button_payload,onChangeButton:Y,onDeleteButton:J})}),"B"===z.response_type||"TB"===z.response_type||"TIB"===z.response_type?o.a.createElement(he.a,{variant:"outlined",fullWidth:!0,startIcon:o.a.createElement(Oe.a,null),onClick:function(e){console.log("[onAddButton] buttonState : ",N);var n={button_id:Z()(),button_text:"",button_payload:"/"+C,button_class:""};w([].concat(Object($.a)(N),[n])),p({type:j,content_id:t,payload:n})},color:"secondary"},"\ubc84\ud2bc \ucd94\uac00"):null)});function we(e){return"undefined"===typeof e||null===e||""===e}var Pe=o.a.memo(function(e){var t=e.value;console.log("TemplateArea : ",t);var n=Object(a.useState)({}),r=Object(c.a)(n,2),l=r[0],i=r[1];return Object(a.useEffect)(function(){var e,n=we(t)?"":t;console.log("response_template : ",n),e=we(n)?"":JSON.stringify(n,void 0,4),i(we(e)?{}:JSON.parse(e))},[t]),o.a.createElement(o.a.Fragment,null,l.length>0&&l.map(function(e){return o.a.createElement(Ne,{key:e.content_id,content_id:e.content_id,response_type:e.response_type,text:e.text,images:e.images,buttons:e.buttons})}))}),Ce=n(9),Be=n(115),Ae=n(933),Re=n.n(Ae),De=n(154);function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(n,!0).forEach(function(t){Object(l.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ze(){var e=Object(K.a)(["\n  padding: 12px;\n  border-radius: 4px;\n  border: 1px solid #dee2e6;\n  /* width: 290px; */\n  width: 100%;\n  outline: none;\n  font-size: 14px;\n  box-sizing: border-box;\n  margin: 8px;\n"]);return ze=function(){return e},e}var We=Object(z.a)(function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)},contentWrapper:{display:"flex",flexDirection:"column",height:"100%",zIndex:10,background:"linear-gradient(to bottom, ".concat(Object(W.fade)(e.palette.background.paper,.8)," 0,").concat(Object(W.fade)(e.palette.background.paper,.6)," 20%,").concat(Object(W.fade)(e.palette.background.paper,.8),")")}}}),Ue=pe.a.input(ze()),Fe=Object(Ce.a)(function(e){return{root:{color:"#fff",backgroundColor:Be.a[500],"&:hover":{backgroundColor:Be.a[700]}}}})(he.a);function Ge(e){return 0===Object.keys(e).length}function He(e){return"undefined"===typeof e||null===e||""===e}var Ye=o.a.memo(function(){var e=We(),t=Object(i.b)(),n=Object(a.useState)(""),r=Object(c.a)(n,2),l=r[0],s=r[1],u=Object(a.useState)(""),p=Object(c.a)(u,2),d=p[0],g=p[1],b=Object(i.c)(function(e){return e.responseTemplate.responseTemplateReducer.selectedIntent});console.log("templateState : ",l),Object(a.useEffect)(function(){Ge(b)?(s(Le({},l,{intent:"",use_yn:"N",response_title:"",content_type:"C",response_template:null})),g("")):(s(Le({},l,{intent:b.intent,use_yn:b.use_yn,response_title:He(b.response_title)?"":b.response_title,content_type:b.content_type,response_template:He(b.response_template)?null:b.response_template})),g(""))},[b]);var _=function(e){var n;s(Le({},l,{response_title:e.target.value})),t((n=e.target.value,{type:E,payload:n}))},h=function(e){var n;s(Le({},l,{content_type:e.target.value})),t((n=e.target.value,{type:y,payload:n}))},x=function(e){var n;s(Le({},l,{use_yn:e.target.value})),t((n=e.target.value,{type:v,payload:n}))},O=function(e){if(console.log("onAddTemplate inputTemplateType : ",d),""!==e.target.value){g(e.target.value);var n={content_id:Z()(),response_type:e.target.value,text:"",images:[],buttons:[]};t(function(e){return{type:f,payload:e}}(n))}else alert("\ud15c\ud50c\ub9bf \uc720\ud615\uc744 \uc120\ud0dd\ud558\uc138\uc694.")};return He(l)||He(l.intent)?o.a.createElement("div",{className:Object(D.a)(e.contentWrapper,"z-10")},o.a.createElement("div",{className:"flex flex-col flex-1 items-center justify-center p-24"},o.a.createElement(De.a,{className:"rounded-full p-48"},o.a.createElement(G.a,{className:"block text-64",color:"secondary"},"chat")),o.a.createElement(M.a,{variant:"h6",className:"my-24"},"\uc778\ud150\ud2b8\ub97c \uc120\ud0dd\ud558\uc138\uc694."))):o.a.createElement("div",{style:{marginLeft:"10px"}},o.a.createElement("div",{style:{width:"100%"}},o.a.createElement("div",{style:{height:"706px"}},o.a.createElement("table",null,o.a.createElement("colgroup",null),o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("th",null,o.a.createElement(M.a,{variant:"body1"},"\uc81c\ubaa9")),o.a.createElement("td",{width:"270px"},o.a.createElement(Ue,{placeholder:"\uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694.",autoFocus:!0,value:l.response_title,onChange:function(e){return _(e)}}))),o.a.createElement("tr",null,o.a.createElement("th",null,o.a.createElement(M.a,{variant:"body1"},"\ucee8\ud150\uce20 \uc720\ud615")),o.a.createElement("td",null,o.a.createElement(ce.a,{variant:"outlined",className:e.formControl},o.a.createElement(ie.a,{native:!0,labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:l.content_type,onChange:function(e){return h(e)}},o.a.createElement("option",{value:"C"},"\uc77c\ubc18"),o.a.createElement("option",{value:"S"},"Stepper"))))),o.a.createElement("tr",null,o.a.createElement("th",null,o.a.createElement(M.a,{variant:"body1"},"\uc0ac\uc6a9\uc5ec\ubd80")),o.a.createElement("td",null,o.a.createElement(ce.a,{variant:"outlined",className:e.formControl},o.a.createElement(ie.a,{native:!0,id:"demo-simple-select-outlined",value:l.use_yn,onChange:function(e){return x(e)}},o.a.createElement("option",{value:"Y"},"\uc0ac\uc6a9\ud568"),o.a.createElement("option",{value:"N"},"\uc0ac\uc6a9\uc548\ud568"))))),o.a.createElement("tr",null,o.a.createElement("th",null,o.a.createElement(M.a,{variant:"body1"},"\ud15c\ud50c\ub9bf \uc720\ud615")),o.a.createElement("td",null,o.a.createElement(ce.a,{variant:"outlined",className:e.formControl},o.a.createElement(ie.a,{native:!0,labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:d,onChange:function(e){return O(e)}},o.a.createElement("option",{value:""},"\uc120\ud0dd\ud558\uc138\uc694"),o.a.createElement("option",{value:"T"},"Only Text"),o.a.createElement("option",{value:"I"},"Only Images"),o.a.createElement("option",{value:"B"},"Only Buttons"),o.a.createElement("option",{value:"TI"},"Text + Images"),o.a.createElement("option",{value:"TB"},"Text + Buttons"),o.a.createElement("option",{value:"TIB"},"Text + Images + Buttons"))))))),o.a.createElement("div",{style:{height:"400px",overflowY:"auto"}},o.a.createElement(Pe,{value:!Ge(b)&&He(b.response_template)?null:l.response_template}))),o.a.createElement("div",{style:{margin:"8px"}},o.a.createElement(Fe,{variant:"contained",color:"primary",size:"small",style:{float:"right"},onClick:function(e){(console.log("[onDelete] intent: ",l.intent),window.confirm("\ud15c\ud50c\ub9bf\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))&&function(){var e=Object(X.a)(q.a.mark(function e(){var n;return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a=l.intent,m.a.delete(N+"/response"+"/".concat(a));case 3:n=e.sent,console.log("[fetchTemplate] response : ",n.data),204===n.status?(t(C(l.intent)),alert("\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")):alert("\uc0ad\uc81c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud558\uc600\uc2b5\ub2c8\ub2e4."),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("err: ",e.t0),alert("\uc0ad\uc81c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud558\uc600\uc2b5\ub2c8\ub2e4.");case 12:case"end":return e.stop()}var a},e,null,[[0,8]])}));return function(){return e.apply(this,arguments)}}()()},startIcon:o.a.createElement(oe.a,null)},"\uc0ad\uc81c"),o.a.createElement(he.a,{variant:"contained",color:"secondary",size:"small",style:{marginRight:"6px",float:"right"},onClick:function(e){var t=0,n=0,a=l.response_template;0===a.length||He(a)?alert("\ud15c\ud50c\ub9bf \uc720\ud615\uc744 \ucd94\uac00\ud574\uc8fc\uc138\uc694."):(a.forEach(function(e,a){if("I"===e.response_type||"TI"===e.response_type||"TIB"===e.response_type){if(0===e.images.length)return void t++;e.images.forEach(function(e,n){""===e.image_path&&t++})}if("B"===e.response_type||"TB"===e.response_type||"TIB"===e.response_type){if(0===e.buttons.length)return void n++;e.buttons.forEach(function(t,a){""!==t.button_text&&""!==e.button_payload||n++})}}),t>0?alert("\uc774\ubbf8\uc9c0 \ud30c\uc77c\uc744 \uc5c5\ub85c\ub4dc \ud558\uc9c0 \uc54a\uc740 \ud56d\ubaa9\uc774 \uc788\uc2b5\ub2c8\ub2e4."):n>0?alert("\ubc84\ud2bc\uba85 \ub610\ub294 payload\ub97c \uc785\ub825\ud558\uc9c0 \uc54a\uc740 \ubc84\ud2bc\uc774 \uc788\uc2b5\ub2c8\ub2e4."):(console.log("onSave : ",l),function(){var e=Object(X.a)(q.a.mark(function e(){return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,window.confirm("\ud15c\ud50c\ub9bf\uc744 \uc800\uc7a5\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&function(){var e=Object(X.a)(q.a.mark(function e(){var t,n,a;return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o=l.intent,m.a.get(N+"/response/".concat(o));case 3:return t=e.sent,n=t.data.length>0?"UPDATE":"INSERT",console.log("method : ",n),e.next=8,B(l.intent,l.use_yn,JSON.stringify(l.response_template),l.response_title,l.content_type,n);case 8:a=e.sent,console.log("[fetchTemplate] response : ",a),"INSERT"===n&&201===a.status||"UPDATE"===n&&200===a.status?alert("\uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."):alert("\uc800\uc7a5 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud558\uc600\uc2b5\ub2c8\ub2e4."),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("err: ",e.t0),alert("\uc800\uc7a5 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud558\uc600\uc2b5\ub2c8\ub2e4.");case 17:case"end":return e.stop()}var o},e,null,[[0,13]])}));return function(){return e.apply(this,arguments)}}()(),e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 9:case"end":return e.stop()}},e,null,[[0,5]])}));return function(){return e.apply(this,arguments)}}()()))},startIcon:o.a.createElement(Re.a,null)},"\uc800\uc7a5"))))}),Je=n(910),Ve=n(884),qe=n(909),Xe=n(974),Ke=n.n(Xe),Qe=(n(975),n(976),n(977)),Ze=n(957),$e=n(958),et=n(993),tt=n(893),nt=n(994),at=n(995),ot=n(906),rt=n(996),lt=n(943),ct=n(938),it=n(942),st=n(32),ut=n(900),pt=n(997),mt=n(883),dt=Object(qe.a)(function(e){return{header:{background:"linear-gradient(to right, "+e.palette.primary.dark+" 0%, "+e.palette.primary.main+" 100%)",color:e.palette.primary.contrastText},panel:{margin:0,borderWidth:"1px 1px 1px 1px",borderStyle:"solid",borderColor:e.palette.divider,"&:first-child":{borderRadius:"16px 16px 0 0"},"&:last-child":{borderRadius:"0 0 16px 16px",borderWidth:"1px 1px 1px 1px"}},expanded:{},media:{height:280},stepper:{backgroundColor:"#3c4252"}}});var gt=o.a.memo(function(){var e=dt(),t=Object(i.c)(function(e){return e.responseTemplate.responseTemplateReducer.selectedIntent}),n=Object(st.a)(),l=Object(mt.a)(n.breakpoints.down("sm")),s=Object(a.useState)(!1),u=Object(c.a)(s,2),p=u[0],m=u[1],d=Object(a.useState)({image_path:"",image_text:""}),g=Object(c.a)(d,2),f=g[0],b=g[1],E=Object(a.useState)(!1),y=Object(c.a)(E,2),v=y[0],_=y[1];Object(a.useEffect)(function(){var e;console.log(t),e=t,0===Object.keys(e).length||function(e){return"undefined"===typeof e||null===e||""===e}(t.intent)?_(!1):_(!0)},[t]);var h=function(e,t){b({image_path:e,image_text:t}),m(!0)},x=function(){b({image_path:"",image_text:""}),m(!1)};return o.a.createElement("div",{style:{height:"600px",overflow:"auto"},className:"flex flex-col flex-1 flex-shrink-0 max-w-xl w-full mx-auto px-4 sm:px-2 py-24 sm:py-32"},o.a.createElement(r.b,{duration:400,delay:100,enter:{animation:"trainsition.slideUpBigIn"}},o.a.createElement(Qe.a,{classes:{root:e.panel,expanded:e.expanded},key:"panel-1",onChange:function(){return console.log("ExpansionPanel onChange")},elevation:0},o.a.createElement(Ze.a,{expandIcon:o.a.createElement(G.a,null,"expand_more")},o.a.createElement("div",{className:"flex items-center"},o.a.createElement(G.a,{className:"mr-8",color:"action"},"help_outline"),o.a.createElement(M.a,{className:""},"\ud15c\ud50c\ub9bf \uc0c1\ud0dc (DATA)"))),o.a.createElement($e.a,null,v?o.a.createElement(Ke.a,{id:"json-pretty",data:JSON.stringify(t),style:{background:"#1e1e1e",fontSize:"12px",height:"372px",overflow:"auto",width:"100%"},mainStyle:"background: #1e1e1e; padding: 1em;"}):o.a.createElement(M.a,{variant:"caption"},"\ud45c\uc2dc\ud560 \ub0b4\uc6a9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.")))),o.a.createElement(r.b,{duration:400,delay:100,enter:{animation:"trainsition.slideUpBigIn"}},o.a.createElement(Qe.a,{classes:{root:e.panel,expanded:e.expanded},key:"panel-2",onChange:function(){return console.log("ExpansionPanel onChange")},elevation:0},o.a.createElement(Ze.a,{expandIcon:o.a.createElement(G.a,null,"expand_more")},o.a.createElement("div",{className:"flex items-center"},o.a.createElement(G.a,{className:"mr-8",color:"action"},"help_outline"),o.a.createElement(M.a,{className:""},"\ud15c\ud50c\ub9bf \uc0c1\ud0dc (\ubbf8\ub9ac\ubcf4\uae30)"))),o.a.createElement($e.a,null,v?o.a.createElement("div",{style:{height:"520px",overflow:"auto",fontSize:"12px",background:"#757575",border:"solid 1px #e9ecef",padding:"6px 6px 6px 6px",width:"100%"}},o.a.createElement("div",{className:"response"},o.a.createElement("div",{className:"message-text"},o.a.createElement(et.a,{subheader:t.response_title}),t.response_template&&t.response_template.length>0&&"C"===t.content_type&&t.response_template.map(function(t){return o.a.createElement(o.a.Fragment,{key:t.content_id},o.a.createElement(tt.a,{className:"classes.root btninfo-container",style:{background:"#3c4252"}},o.a.createElement(nt.a,null,o.a.createElement(et.a,{subheader:t.text}),t.images.length>0&&t.images.map(function(t){return o.a.createElement(o.a.Fragment,{key:t.image_id},o.a.createElement(at.a,{className:e.media,image:t.image_path,component:"img",title:t.image_text,onClick:function(){return h(t.image_path,t.image_text)}}),o.a.createElement(ot.a,null,o.a.createElement(M.a,{variant:"body2",color:"textSecondary",component:"p"},t.image_text)))})),t.buttons.length>0&&o.a.createElement(rt.a,{style:{justifyContent:"space-around"}},t.buttons.map(function(e){return o.a.createElement(he.a,{className:"btninfo-btn",key:e.button_id,size:"small",variant:"contained",color:"secondary",value:e.button_text},e.button_text)}))))}),t.response_template&&t.response_template.length>0&&"S"===t.content_type&&o.a.createElement(lt.a,{className:e.stepper,activeStep:0,orientation:"vertical"},t.response_template.map(function(t){return o.a.createElement(ct.a,{key:t.content_id},o.a.createElement(it.a,null,o.a.createElement(tt.a,{className:"classes.root btninfo-container",style:{background:"#3c4252"}},o.a.createElement(nt.a,null,0===t.images.length&&0===t.buttons.length&&o.a.createElement(et.a,{subheader:t.text}),t.images.length>0&&t.images.map(function(t){return o.a.createElement(o.a.Fragment,{key:t.image_id},o.a.createElement(at.a,{className:e.media,image:t.image_path,component:"img",title:t.image_text,onClick:function(){return h(t.image_path,t.image_text)}}),o.a.createElement(ot.a,null,o.a.createElement(M.a,{variant:"body2",color:"textSecondary",component:"p"},t.image_text)))})),t.buttons.length>0&&o.a.createElement(rt.a,{style:{justifyContent:"space-around"}},t.buttons.map(function(e){return o.a.createElement(he.a,{className:"btninfo-btn",key:e.button_id,size:"small",variant:"contained",color:"secondary",value:e.button_text},e.button_text)})))))}))))):o.a.createElement(M.a,{variant:"caption"},"\ud45c\uc2dc\ud560 \ub0b4\uc6a9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.")))),o.a.createElement(ut.a,{fullScreen:l,open:p,onClose:x,"aria-labelledby":"responsive-dialog-title"},o.a.createElement(pt.a,null,o.a.createElement("img",{src:f.image_path,title:f.image_text,alt:f.image_text,onClick:x}))))}),ft=Object(qe.a)(function(e){var t;return{root:{display:"flex",flexDirection:"row",minHeight:"100%",position:"relative",flex:"1 1 auto",height:"auto",backgroundColor:e.palette.background.default},topBg:{position:"absolute",left:0,right:0,top:0,height:100,backgroundImage:'url("../../assets/images/backgrounds/header-bg.png")',backgroundColor:e.palette.primary.dark,backgroundSize:"cover",pointerEvents:"none"},contentCardWrapper:(t={position:"relative",padding:24,maxWidth:1900,display:"flex",flexDirection:"column",flex:"1 0 auto",width:"100%",minWidth:"0",maxHeight:"100%",margin:"0 auto"},Object(l.a)(t,e.breakpoints.down("sm"),{padding:16}),Object(l.a)(t,e.breakpoints.down("xs"),{padding:12}),t),contentCard:{display:"flex",position:"relative",flex:"1 1 100%",flexDirection:"row-reverse",backgroundImage:'url("/assets/images/backgrounds/dark-material-bg.jpg")',backgroundColor:e.palette.background.paper,boxShadow:e.shadows[1],borderRadius:8,minHeight:0,overflow:"hidden"},drawerPaper:Object(l.a)({width:450,maxWidth:"100%",overflow:"hidden",height:"100%"},e.breakpoints.up("md"),{position:"relative"}),contentWrapper:{display:"flex",flexDirection:"column",flex:"1 1 100%",zIndex:10,background:"linear-gradient(to bottom, ".concat(Object(W.fade)(e.palette.background.paper,.8)," 0,").concat(Object(W.fade)(e.palette.background.paper,.6)," 20%,").concat(Object(W.fade)(e.palette.background.paper,.8),")")},content:{display:"flex",flex:"1 1 100%",minHeight:0}}});var bt=o.a.memo(function(){var e=ft();return o.a.createElement("div",{className:Object(D.a)(e.root)},o.a.createElement("div",{className:e.topBg}),o.a.createElement("div",{className:Object(D.a)(e.contentCardWrapper,"container"),style:{height:"840px",overflowY:"auto"}},o.a.createElement("div",{className:e.contentCard},o.a.createElement(Je.a,{mdUp:!0},o.a.createElement(Ve.a,{className:"h-full absolute z-20",variant:"temporary",anchor:"right",classes:{paper:Object(D.a)(e.drawerPaper,"absolute left-0")},style:{position:"absolute"},ModelProps:{keepMounted:!0,disablePortal:!0,BackdropProps:{classes:{root:"absolute"}}}},o.a.createElement(gt,null))),o.a.createElement(Je.a,{smDown:!0},o.a.createElement(Ve.a,{className:"h-full z-20",variant:"permanent",open:!0,classes:{paper:e.drawerPaper}},o.a.createElement(gt,null))),o.a.createElement("main",{className:Object(D.a)(e.contentWrapper,"z-10")},o.a.createElement("div",{className:"p-24"},o.a.createElement("div",{style:{height:"750px",width:"30%",float:"left",overflowY:"auto"}},o.a.createElement(J,{project_id:"default"})),o.a.createElement("div",{style:{height:"750px",width:"70%",float:"left",overflowY:"auto"}},o.a.createElement(Ye,null)))))))}),Et=n(172),yt=n(46);function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(n,!0).forEach(function(t){Object(l.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ht={intents:[],selectedIntent:{intent:"",use_yn:"N",response_template:null,response_title:"",content_type:"C"}},xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,t=arguments.length>1?arguments[1]:void 0;switch(console.log("[responseTemplateReducer] state : ",e),console.log("[responseTemplateReducer] action : ",t),t.type){case d:return _t({},e,{intents:t.payload,selectedIntent:{}});case g:return 0===t.payload.length?_t({},e,{selectedIntent:{intent:t.intent,use_yn:"N",response_template:[],response_title:"",content_type:"C"}}):_t({},e,{selectedIntent:{intent:t.payload[0].intent,use_yn:t.payload[0].use_yn,response_template:JSON.parse(t.payload[0].response_template),response_title:t.payload[0].response_title,content_type:t.payload[0].content_type}});case f:return _t({},e,{selectedIntent:_t({},e.selectedIntent,{response_template:e.selectedIntent.response_template.concat(t.payload)})});case b:return _t({},e,{selectedIntent:{}});case E:return _t({},e,{selectedIntent:_t({},e.selectedIntent,{response_title:t.payload})});case y:return _t({},e,{selectedIntent:_t({},e.selectedIntent,{content_type:t.payload})});case v:return _t({},e,{selectedIntent:_t({},e.selectedIntent,{use_yn:t.payload})});case"[RESPONSE TEMPLATE] SAVE TEMPLATE":case"[RESPONSE TEMPLATE] DELETE TEMPLATE":return e;case _:return _t({},e,{selectedIntent:_t({},e.selectedIntent,{response_template:e.selectedIntent.response_template.filter(function(e){return e.content_id!==t.payload})})});case h:var n=[],a=e.selectedIntent.response_template;return a.forEach(function(e){e.content_id===t.content_id?n.push(_t({},e,{text:t.payload})):n.push(_t({},e))}),_t({},e,{selectedIntent:_t({},e.selectedIntent,{response_template:n})});case x:var o=[],r=e.selectedIntent.response_template;return r.forEach(function(e){e.content_id===t.content_id?o.push(_t({},e,{images:e.images.concat(t.payload)})):o.push(_t({},e))}),_t({},e,{selectedIntent:_t({},e.selectedIntent,{response_template:o})});case O:var l=[],c=e.selectedIntent.response_template;return c.forEach(function(e){var n=e.images.map(function(e){return e.image_id===t.payload.image_id?_t({},e,{image_text:t.payload.image_text}):e});l.push(_t({},e,{images:n}))}),_t({},e,{selectedIntent:_t({},e.selectedIntent,{response_template:l})});case T:var i=[],s=e.selectedIntent.response_template;return s.forEach(function(e){var n=e.images.filter(function(e){return e.image_id!==t.payload});i.push(_t({},e,{images:n}))}),_t({},e,{selectedIntent:_t({},e.selectedIntent,{response_template:i})});case j:var u=[],p=e.selectedIntent.response_template;return p.forEach(function(e){e.content_id===t.content_id?u.push(_t({},e,{buttons:e.buttons.concat(t.payload)})):u.push(_t({},e))}),_t({},e,{selectedIntent:_t({},e.selectedIntent,{response_template:u})});case I:var m=[],k=e.selectedIntent.response_template;return k.forEach(function(e){var n=e.buttons.map(function(e){return e.button_id===t.payload.button_id?_t({},e,{button_class:t.payload.button_class,button_text:t.payload.button_text,button_payload:t.payload.button_payload}):e});m.push(_t({},e,{buttons:n}))}),_t({},e,{selectedIntent:_t({},e.selectedIntent,{response_template:m})});case S:var N=[],w=e.selectedIntent.response_template;return w.forEach(function(e){var n=e.buttons.filter(function(e){return e.button_id!==t.payload});N.push(_t({},e,{buttons:n}))}),_t({},e,{selectedIntent:_t({},e.selectedIntent,{response_template:N})});default:return e}},Ot=Object(yt.d)({responseTemplateReducer:xt}),Tt=Object(qe.a)(function(e){return{layoutRoot:{}}});t.default=Object(Et.a)("responseTemplate",Ot)(function(e){var t=Tt(e);return o.a.createElement(r.n,{classes:{root:t.layoutRoot},content:o.a.createElement(bt,null)})})}}]);
//# sourceMappingURL=11.8eb17748.chunk.js.map