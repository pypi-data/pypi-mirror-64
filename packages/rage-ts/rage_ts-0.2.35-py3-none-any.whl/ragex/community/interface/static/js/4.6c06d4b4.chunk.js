(this["webpackJsonprasa-interface"]=this["webpackJsonprasa-interface"]||[]).push([[4],{1604:function(e,t,a){"use strict";a.r(t);var n=a(17),l=a(0),r=a(33),s=a(212),c=a(25),i=a(1),o=a(10),m=a(34);function u(e){var t=e.children;return l.createElement(m.a,{content:t,ml:1},l.createElement(o.a,{icon:"info-circle",style:{fontSize:18}}))}var d=a(14),E=a(9),v=a(76),b=a.n(v),f=(a(1518),a(1602)),h=a(179),g=a(27),x={PT1H:"h a",P1D:"DD/MM",P1M:"MMM"},y={PT1H:" [at] h a",P1D:" [on] MMMM Do",P1M:" [in] MMMM"},k=function(e){return b.a.duration(e).format("h [hours] m [minutes] s [seconds]",{trim:"both"})},p=E.default.div.withConfig({displayName:"SimpleLineChart__ValueOnlyTooltip",componentId:"lvds7q-0"})(["padding:6px 8px;background-color:white;border-radius:0.3em;border:1px solid rgb(204,204,204);"]);function M(e){var t=e.data,a=e.title,n=e.isTime,r=e.isAdvanced,s=e.bucket,c=void 0===s?"P1D":s;if(!t)return null;var o,m=0===(o=t).length?0:o.reduce((function(e,t){return e+t.value}),0)/o.length,E=n?k:function(e){return Math.round(e).toLocaleString()};return l.createElement(h.a,null,l.createElement(g.a,{variant:4},a),l.createElement(i.Flex,null,l.createElement(d.a,null,E(m)),l.createElement(u,null,"Average ",a.replace(/^[Aa]verage /,"").toLowerCase()," in the specified time range.")),l.createElement(f.d,{width:"100%",height:150},l.createElement(f.b,{data:t},r&&[l.createElement(f.c,{key:"grid",vertical:!1}),l.createElement(f.g,{key:"y-axis",minTickGap:0,allowDecimals:!1,tickLine:!1}),l.createElement(f.f,{key:"x-axis",dataKey:"timestamp",allowDecimals:!1,minTickGap:10,tickLine:!1,tickFormatter:function(e){return b.a.unix(e).format(x[c])}})],l.createElement(f.e,{cursor:!1,isAnimationActive:!1,content:function(e){var t=e.active,a=e.payload;if(!t)return null;var n=a&&a[0].payload;return n?l.createElement(p,null,E(n.value),b.a.unix(n.timestamp).format(y[c])):null}}),l.createElement(f.a,{type:"linear",dataKey:"value",stroke:"#3d44bc",fill:"#3d44bc",fillOpacity:.3,strokeWidth:2,dot:!1}))))}var w=a(458),A=a(132),F=[{label:"last 24 hours",value:"PT1H",data:w.c.PT1H},{label:"last 30 days",value:"P1D",data:w.c.P1D},{label:"last 12 months",value:"P1M",data:w.c.P1M}];function S(e){var t=e.value,a=e.onChange,n=l.useCallback((function(e){return e&&!Array.isArray(e)&&a(e)}),[a]);return l.createElement(A.a,{value:F.find((function(e){return e.value===t})),options:F,onChange:n})}var B=a(104);function P(e){var t=e.onFetchAnalytics,a=e.analytics,n=e.bucket,r=e.conversationsStatistics;return null===a||null===r?null:l.createElement(B.a,{title:"Analytics",scrollable:!0,rightContent:l.createElement(i.Box,{mr:3,width:.5,style:{display:"inline-block"}},l.createElement(S,{value:n,onChange:function(e){return t({bucket:e.value,start:e.data.start,end:e.data.end})}}))},l.createElement(i.Flex,{flexDirection:"column"},l.createElement(g.a,{variant:3,mb:3},"Sessions"),l.createElement(i.Flex,{mb:4,flex:"1 0 auto"},l.createElement(i.Box,{mr:3,width:1/3},l.createElement(M,{data:a.conversation_length,bucket:n,title:"Average Session Length",isTime:!0})),l.createElement(i.Box,{mx:3,width:1/3},l.createElement(M,{data:a.conversation_steps,bucket:n,title:"Average Number of Messages per Session"})),l.createElement(i.Box,{ml:3,width:1/3},l.createElement(M,{data:a.sessions_per_user,bucket:n,title:"Average Number of Sessions per User"}))),l.createElement(g.a,{variant:3,mb:3},"Users"),l.createElement(i.Flex,{mb:4,flex:"1 0 auto"},l.createElement(i.Box,{mr:3,width:2/3},l.createElement(M,{data:a.conversations,bucket:n,title:"Number of Active Users",isAdvanced:!0})),l.createElement(i.Box,{mx:3,width:1/3},l.createElement(M,{data:a.new_users,bucket:n,title:"Number of New Users"}))),l.createElement(g.a,{variant:3,mb:3},"Messages"),l.createElement(i.Flex,{mb:4,flex:"1 0 auto"},l.createElement(i.Box,{mr:3,width:2/7},l.createElement(M,{data:a.user_messages,bucket:n,title:"Number of User Messages"})),l.createElement(i.Box,{mx:3,width:2/7},l.createElement(M,{data:a.bot_messages,bucket:n,title:"Number of Bot Messages"})),l.createElement(i.Box,{mx:3,width:2/7},l.createElement(M,{data:a.total_messages,bucket:n,title:"Number of All Messages"})),l.createElement(i.Box,{ml:3,width:1/7},l.createElement(h.a,{style:{height:"100%"}},l.createElement(i.Flex,{flexDirection:"column",style:{height:"100%"}},l.createElement(i.Box,{flex:"1"},l.createElement(i.Flex,null,l.createElement(g.a,{variant:4},"Overall user messages"),l.createElement(u,null,"Overall number of user messages.")),l.createElement(d.a,null,r.user_messages.toLocaleString())),l.createElement(i.Box,{flex:"1"},l.createElement(i.Flex,null,l.createElement(g.a,{variant:4},"Overall bot messages"),l.createElement(u,null,"Overall number of bot messages.")),l.createElement(d.a,null,r.bot_messages.toLocaleString()))))))))}var D={onFetchAnalytics:s.a.request,onFetchConversationsStatistics:c.l.request};t.default=Object(r.b)((function(e){return{analytics:e.analytics.metrics,start:e.analytics.start,end:e.analytics.end,bucket:e.analytics.bucket,conversationsStatistics:e.messages.conversationsStatistics,loading:e.analytics.loading}}),D)((function(e){var t=e.start,a=e.end,r=Object(n.a)(e,["start","end"]),s=r.bucket,c=r.onFetchAnalytics,i=r.onFetchConversationsStatistics;return l.useEffect((function(){c({bucket:s,start:t,end:a}),i()}),[s,t,a,c,i]),l.createElement(P,r)}))}}]);