

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>bhive.memo module &mdash; bhive 0.20.20 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/bhive-icon_bw.png"/>
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="bhive.message module" href="bhive.message.html" />
    <link rel="prev" title="bhive.market module" href="bhive.market.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> bhive
          

          
            
            <img src="_static/bhive-logo_2.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.20
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">bhivepy CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="apidefinitions.html">Api Definitions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">bhive</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="bhive.html">bhive package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="bhive.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="bhive.account.html">bhive.account module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.aes.html">bhive.aes module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.amount.html">bhive.amount module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.asciichart.html">bhive.asciichart module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.asset.html">bhive.asset module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.block.html">bhive.block module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.blockchain.html">bhive.blockchain module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.blockchainobject.html">bhive.blockchainobject module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.cli.html">bhive.cli module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.comment.html">bhive.comment module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.constants.html">bhive.constants module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.conveyor.html">bhive.conveyor module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.discussions.html">bhive.discussions module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.exceptions.html">bhive.exceptions module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.hive.html">bhive.hive module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.hiveconnect.html">bhive.hiveconnect module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.imageuploader.html">bhive.imageuploader module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.instance.html">bhive.instance module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.market.html">bhive.market module</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">bhive.memo module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.message.html">bhive.message module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.nodelist.html">bhive.nodelist module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.notify.html">bhive.notify module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.price.html">bhive.price module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.profile.html">bhive.profile module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.rc.html">bhive.rc module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.snapshot.html">bhive.snapshot module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.storage.html">bhive.storage module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.transactionbuilder.html">bhive.transactionbuilder module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.utils.html">bhive.utils module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.version.html">bhive.version module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.vote.html">bhive.vote module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.wallet.html">bhive.wallet module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bhive.witness.html">bhive.witness module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="bhive.html#module-bhive">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="bhiveapi.html">bhiveapi package</a></li>
<li class="toctree-l2"><a class="reference internal" href="bhivebase.html">bhivebase package</a></li>
<li class="toctree-l2"><a class="reference internal" href="bhivegrapheneapi.html">bhivegrapheneapi package</a></li>
<li class="toctree-l2"><a class="reference internal" href="bhivegraphenebase.html">bhivegraphenebase package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">Repository</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html#flow">Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html#how-to-contribute">How to Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html#issues">Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html#contributing">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html#copyright-and-licensing">Copyright and Licensing</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support and Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="indices.html">Indices and Tables</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">bhive</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="modules.html">bhive</a> &raquo;</li>
        
          <li><a href="bhive.html">bhive package</a> &raquo;</li>
        
      <li>bhive.memo module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/bhive.memo.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-bhive.memo">
<span id="bhive-memo-module"></span><h1>bhive.memo module<a class="headerlink" href="#module-bhive.memo" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="bhive.memo.Memo">
<em class="property">class </em><code class="sig-prename descclassname">bhive.memo.</code><code class="sig-name descname">Memo</code><span class="sig-paren">(</span><em class="sig-param">from_account=None</em>, <em class="sig-param">to_account=None</em>, <em class="sig-param">hive_instance=None</em><span class="sig-paren">)</span><a class="headerlink" href="#bhive.memo.Memo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Deals with Memos that are attached to a transfer</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>from_account</strong> (<a class="reference internal" href="bhive.account.html#bhive.account.Account" title="bhive.account.Account"><em>Account</em></a>) – Account that has sent the memo</p></li>
<li><p><strong>to_account</strong> (<a class="reference internal" href="bhive.account.html#bhive.account.Account" title="bhive.account.Account"><em>Account</em></a>) – Account that has received the memo</p></li>
<li><p><strong>hive_instance</strong> (<a class="reference internal" href="bhive.hive.html#bhive.hive.Hive" title="bhive.hive.Hive"><em>Hive</em></a>) – Hive instance</p></li>
</ul>
</dd>
</dl>
<p>A memo is encrypted with a shared secret derived from a private key of
the sender and a public key of the receiver. Due to the underlying
mathematics, the same shared secret can be derived by the private key
of the receiver and the public key of the sender. The encrypted message
is perturbed by a nonce that is part of the transmitted message.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bhive.memo</span> <span class="kn">import</span> <span class="n">Memo</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">Memo</span><span class="p">(</span><span class="s2">&quot;hiveeu&quot;</span><span class="p">,</span> <span class="s2">&quot;wallet.xeroc&quot;</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">hive</span><span class="o">.</span><span class="n">wallet</span><span class="o">.</span><span class="n">unlock</span><span class="p">(</span><span class="s2">&quot;secret&quot;</span><span class="p">)</span>
<span class="n">enc</span> <span class="o">=</span> <span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">encrypt</span><span class="p">(</span><span class="s2">&quot;foobar&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">enc</span><span class="p">)</span>
<span class="o">&gt;&gt;</span> <span class="p">{</span><span class="s1">&#39;nonce&#39;</span><span class="p">:</span> <span class="s1">&#39;17329630356955254641&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;8563e2bb2976e0217806d642901a2855&#39;</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">decrypt</span><span class="p">(</span><span class="n">enc</span><span class="p">))</span>
<span class="o">&gt;&gt;</span> <span class="n">foobar</span>
</pre></div>
</div>
<p>To decrypt a memo, simply use</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bhive.memo</span> <span class="kn">import</span> <span class="n">Memo</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">Memo</span><span class="p">()</span>
<span class="n">m</span><span class="o">.</span><span class="n">hive</span><span class="o">.</span><span class="n">wallet</span><span class="o">.</span><span class="n">unlock</span><span class="p">(</span><span class="s2">&quot;secret&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">decrypt</span><span class="p">(</span><span class="n">op_data</span><span class="p">[</span><span class="s2">&quot;memo&quot;</span><span class="p">]))</span>
</pre></div>
</div>
<p>if <code class="docutils literal notranslate"><span class="pre">op_data</span></code> being the payload of a transfer operation.</p>
<p>Memo Keys</p>
<p>In Hive, memos are AES-256 encrypted with a shared secret between sender and
receiver. It is derived from the memo private key of the sender and the memo
public key of the receiver.</p>
<p>In order for the receiver to decode the memo, the shared secret has to be
derived from the receiver’s private key and the senders public key.</p>
<p>The memo public key is part of the account and can be retrieved with the
<cite>get_account</cite> call:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">get_account</span> <span class="o">&lt;</span><span class="nx">accountname</span><span class="o">&gt;</span>
<span class="p">{</span>
  <span class="p">[...]</span>
  <span class="s2">&quot;options&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;memo_key&quot;</span><span class="o">:</span> <span class="s2">&quot;GPH5TPTziKkLexhVKsQKtSpo4bAv5RnB8oXcG4sMHEwCcTf3r7dqE&quot;</span><span class="p">,</span>
    <span class="p">[...]</span>
  <span class="p">},</span>
  <span class="p">[...]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>while the memo private key can be dumped with <cite>dump_private_keys</cite></p>
<p>Memo Message</p>
<p>The take the following form:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;from&quot;</span><span class="o">:</span> <span class="s2">&quot;GPH5mgup8evDqMnT86L7scVebRYDC2fwAWmygPEUL43LjstQegYCC&quot;</span><span class="p">,</span>
  <span class="s2">&quot;to&quot;</span><span class="o">:</span> <span class="s2">&quot;GPH5Ar4j53kFWuEZQ9XhxbAja4YXMPJ2EnUg5QcrdeMFYUNMMNJbe&quot;</span><span class="p">,</span>
  <span class="s2">&quot;nonce&quot;</span><span class="o">:</span> <span class="s2">&quot;13043867485137706821&quot;</span><span class="p">,</span>
  <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="s2">&quot;d55524c37320920844ca83bb20c8d008&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The fields <cite>from</cite> and <cite>to</cite> contain the memo public key of sender and receiver.
The <cite>nonce</cite> is a random integer that is used for the seed of the AES encryption
of the message.</p>
<p>Encrypting a memo</p>
<p>The high level memo class makes use of the bhive wallet to obtain keys
for the corresponding accounts.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bhive.memo</span> <span class="kn">import</span> <span class="n">Memo</span>
<span class="kn">from</span> <span class="nn">bhive.account</span> <span class="kn">import</span> <span class="n">Account</span>

<span class="n">memoObj</span> <span class="o">=</span> <span class="n">Memo</span><span class="p">(</span>
    <span class="n">from_account</span><span class="o">=</span><span class="n">Account</span><span class="p">(</span><span class="n">from_account</span><span class="p">),</span>
    <span class="n">to_account</span><span class="o">=</span><span class="n">Account</span><span class="p">(</span><span class="n">to_account</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">encrypted_memo</span> <span class="o">=</span> <span class="n">memoObj</span><span class="o">.</span><span class="n">encrypt</span><span class="p">(</span><span class="n">memo</span><span class="p">)</span>
</pre></div>
</div>
<p>Decoding of a received memo</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">getpass</span> <span class="kn">import</span> <span class="n">getpass</span>
<span class="kn">from</span> <span class="nn">bhive.block</span> <span class="kn">import</span> <span class="n">Block</span>
<span class="kn">from</span> <span class="nn">bhive.memo</span> <span class="kn">import</span> <span class="n">Memo</span>

<span class="c1"># Obtain a transfer from the blockchain</span>
<span class="n">block</span> <span class="o">=</span> <span class="n">Block</span><span class="p">(</span><span class="mi">23755086</span><span class="p">)</span>                   <span class="c1"># block</span>
<span class="n">transaction</span> <span class="o">=</span> <span class="n">block</span><span class="p">[</span><span class="s2">&quot;transactions&quot;</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span>    <span class="c1"># transactions</span>
<span class="n">op</span> <span class="o">=</span> <span class="n">transaction</span><span class="p">[</span><span class="s2">&quot;operations&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>         <span class="c1"># operation</span>
<span class="n">op_id</span> <span class="o">=</span> <span class="n">op</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>                             <span class="c1"># operation type</span>
<span class="n">op_data</span> <span class="o">=</span> <span class="n">op</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>                           <span class="c1"># operation payload</span>

<span class="c1"># Instantiate Memo for decoding</span>
<span class="n">memo</span> <span class="o">=</span> <span class="n">Memo</span><span class="p">()</span>

<span class="c1"># Unlock wallet</span>
<span class="n">memo</span><span class="o">.</span><span class="n">unlock_wallet</span><span class="p">(</span><span class="n">getpass</span><span class="p">())</span>

<span class="c1"># Decode memo</span>
<span class="c1"># Raises exception if required keys not available in the wallet</span>
<span class="nb">print</span><span class="p">(</span><span class="n">memo</span><span class="o">.</span><span class="n">decrypt</span><span class="p">(</span><span class="n">op_data</span><span class="p">[</span><span class="s2">&quot;transfer&quot;</span><span class="p">]))</span>
</pre></div>
</div>
<dl class="method">
<dt id="bhive.memo.Memo.decrypt">
<code class="sig-name descname">decrypt</code><span class="sig-paren">(</span><em class="sig-param">memo</em><span class="sig-paren">)</span><a class="headerlink" href="#bhive.memo.Memo.decrypt" title="Permalink to this definition">¶</a></dt>
<dd><p>Decrypt a memo</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>memo</strong> (<em>str</em>) – encrypted memo message</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>encrypted memo</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="bhive.memo.Memo.encrypt">
<code class="sig-name descname">encrypt</code><span class="sig-paren">(</span><em class="sig-param">memo</em>, <em class="sig-param">bts_encrypt=False</em><span class="sig-paren">)</span><a class="headerlink" href="#bhive.memo.Memo.encrypt" title="Permalink to this definition">¶</a></dt>
<dd><p>Encrypt a memo</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>memo</strong> (<em>str</em>) – clear text memo message</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>encrypted memo</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="bhive.memo.Memo.unlock_wallet">
<code class="sig-name descname">unlock_wallet</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#bhive.memo.Memo.unlock_wallet" title="Permalink to this definition">¶</a></dt>
<dd><p>Unlock the library internal wallet</p>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="bhive.message.html" class="btn btn-neutral float-right" title="bhive.message module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="bhive.market.html" class="btn btn-neutral float-left" title="bhive.market module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, ChainSquad GmbH, 2018-2019, Holger Nahrstaedt

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>