description:
  name: null_spec
  description: run N_SAMPLES null steps at CONC concurrency. May be used to measure
    overhead in merlin.

batch:
  type: local
  dry_run: false
  shell: /bin/bash

env:
  variables:
    OUTPUT_PATH: ./
    N_SAMPLES: 1
    CONC: 2

study:
- name: null_step
  description: exit immediately
  run:
    cmd: '#echo $(SAMPLE)

      exit 0

      '
    task_queue: queue_s1_c2
    shell: /bin/bash
    max_retries: 30
- name: verify
  description: echo done
  run:
    cmd: echo "Done"
    depends:
    - null_step_*
    task_queue: queue_s1_c2
    shell: /bin/bash
    max_retries: 30

global.parameters: {}

merlin:
  resources:
    workers:
      worker_s1_c2:
        args: -O fair --prefetch-multiplier 1 -E -l info --concurrency 2 --logfile=%%p.log
        steps:
        - all
        nodes:
        batch:
    task_server: celery
    overlap: false
  samples:
    generate:
      cmd: for i in {1..1} ; do echo $i ; done >> /g/g13/bay1/merlin/merlin/examples/workflows/null_spec/scripts/null_results/run_4/c_2/s_1/null_spec_20200330-104536/merlin_info/samples.csv
    file: /g/g13/bay1/merlin/merlin/examples/workflows/null_spec/scripts/null_results/run_4/c_2/s_1/null_spec_20200330-104536/merlin_info/samples.csv
    column_labels:
    - SAMPLE
    level_max_dirs: 25
