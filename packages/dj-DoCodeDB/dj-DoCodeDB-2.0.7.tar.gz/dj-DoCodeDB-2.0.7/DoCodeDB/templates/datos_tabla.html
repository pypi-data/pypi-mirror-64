<!-- Se implementa el base por medio de un template de terceros -->
{% include spinner_dc %}
{% load static %}

<!-- LIBRERIAS -->
<!-- JQUERY -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
<!-- Bootstrap -->
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.css">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.bootstrap4.min.css">

<!-- DATATABLES -->
<link href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css" rel="stylesheet"/>
<link href="https://cdn.datatables.net/buttons/1.6.0/css/buttons.dataTables.min.css" rel="stylesheet"/>
<script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js" ></script>

<!-- DataTable BOTONES librerias adicionales -->
<script src="https://cdn.datatables.net/buttons/1.6.0/js/dataTables.buttons.min.js" ></script>
<script src="https://cdn.datatables.net/buttons/1.6.0/js/buttons.flash.min.js" ></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js" ></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js" ></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js" ></script>
<script src="https://cdn.datatables.net/buttons/1.6.0/js/buttons.html5.min.js" ></script>
<script src="https://cdn.datatables.net/buttons/1.6.0/js/buttons.print.min.js" ></script>

<!-- Font Awesome -->
<link rel="stylesheet" href="{% static 'font-awesome-4.7.0/css/font-awesome.min.css' %}">

<!-- Se implementa el Token para realizar llamadas AJAX -->
<script type="text/javascript"> window.CSRF_TOKEN = "{{ csrf_token }}"; </script>
<!-- LIBRERIAS -->

{% block css %}
{% endblock %}

{% block content %}

<section id="registros">
  <div class="container-fluid">
    
    {% include 'alertas_bd.html' %}

    <button type="button" class="btn btn-success btn-nuevo-user" data-toggle="modal" data-target="#nuevo">
      <span><i class="fa fa-plus icon-plus"></i>Nuevo</span>
    </button>

    <!-- TABLA -->
    <div class="otra mt-3">
      <table id="table_id" class="table table-striped table-bordered dt-responsive nowrap" style="width:100%">
        <thead>
          <tr>
            {% for campo in campos %}
            <th>{{campo.nombre}}</th>
            {% endfor %}
            <th></th>
          </tr>
        </thead>
        <tbody>
          {% load filtros %}
          {% for registro in registros %}
          <tr>
              {% for dato in registro|contenido:campos %}
                <td>{{dato}}</td>
              {% endfor %}
              <td>
                <div class="row">
                  <div class="col-sm-6">
                    <button class="btn-check btn no-padding" type="button" onclick="editar_registro({{registro.id}},'{{object_name}}','{{appname}}')">                      
                      <i class="fa fa-pencil"></i>
                    </button>
                  </div>
                  <div class="col-6">
                    <button class="btn-delete btn-no-padding boton-eliminar" type="button" onclick="eliminar_registro({{registro.id}})">
                      <i class="fa fa-trash"></i>
                    </button>
                  </div>
                </div>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

  </div>
</section>
{% endblock content %}

{% include 'modales_bd.html' %}

<script src="{% static 'js/funcionalidad_tabla.js' %}"></script>
<script>
  $('.activar-spinner').each((i, elm) => {
      $(elm).click(function(){
          cargando_mostrar();
      });
  });
</script>
<script>
  $(document).ready(function() {
    var table = $('#example').DataTable( {
        lengthChange: false,
        buttons: [ 'copy', 'excel', 'pdf', 'colvis' ]
    } );

    table.buttons().container()
        .appendTo( '#table_id_wrapper .col-md-6:eq(0)' );
  } );
</script>

{% block js %}
{% endblock js %}