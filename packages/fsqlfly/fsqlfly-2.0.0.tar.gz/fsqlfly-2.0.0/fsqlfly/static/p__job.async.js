(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{SiJX:function(e,t,a){"use strict";a.r(t);a("Mwp2");var n=a("VXEj"),r=(a("IzEo"),a("bx4M")),l=(a("lUTK"),a("BvKs")),c=(a("qVdP"),a("jsC+")),i=(a("MXD1"),a("CFYs")),s=(a("+L6B"),a("2/Rp")),o=(a("5NDa"),a("5rEg")),u=(a("7Kak"),a("9yH6")),m=(a("2qtc"),a("kLXV")),p=(a("5Dmo"),a("3S7+")),d=(a("+BJd"),a("mr32")),f=(a("Telt"),a("Tckk")),E=(a("miYZ"),a("tsqr")),h=a("p0pE"),v=a.n(h),g=a("2Taf"),N=a.n(g),y=a("vZ4D"),k=a.n(y),C=a("l4Ni"),I=a.n(C),b=a("ujKo"),R=a.n(b),x=a("MhPg"),T=a.n(x),w=a("q1tI"),S=a.n(w),D=a("MuoO"),L=a("8Skl"),j=a("WsrF"),M=(a("XlDN"),a("rLCj")),B=a("4NGg"),F=a.n(B),U=a("c+yx");function G(e){return function(){var t,a=R()(e);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var n=R()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return I()(this,t)}}var J="job",K=function(e){T()(a,e);var t=G(a);function a(){var e;return N()(this,a),(e=t.apply(this,arguments)).state={search:"",tag:0},e.doRefresh=function(){(0,e.props.dispatch)({type:"".concat(J,"/fetch")})},e.stopRunTerminal=function(t){var a=e.props.dispatch;a({type:"".concat(J,"/run"),payload:v()({},t,{method:"cancel",model:J}),callback:function(e){e.success?(E.a.success("删除成功！"),a({type:"".concat(J,"/deleteOne"),payload:{id:t.id}})):E.a.error(e.msg)}})},e.getListContent=function(){var t=e.state,a=t.tag,n=t.search;return e.props.listBasicList.filter(function(e){return e.name.indexOf(n)>=0&&(0===a||e.namespaceId===a)})},e.getNamespace=function(t){if(void 0===t)return null;var a=e.props.namespaces.filter(function(e){return e.id===t});return 0===a.length?null:a[0]},e.getNamespaceAvatar=function(t){var a=e.getNamespace(t.namespaceId);return null===a?S.a.createElement(f.a,{alt:t.info,shape:"circle",size:"large"},t.name.substr(0,2)):S.a.createElement(f.a,{src:null===a?"":a.avatar,alt:t.info,shape:"circle",size:"large"})},e.getNamespaceTitle=function(t){var a=e.getNamespace(t);return null===a?S.a.createElement(d.a,null,"-"):S.a.createElement(p.a,{title:a.name,placement:"top"},S.a.createElement(d.a,null,a.name.substring(0,U.a)))},e}return k()(a,[{key:"componentDidMount",value:function(){this.doRefresh()}},{key:"render",value:function(){var e=this,t=this.props,a=t.namespaces,d=t.loading,f=u.a.Group,E=u.a.Button,h=o.a.Search,v=this.state.search,g=S.a.createElement("div",{className:F.a.extraContent},S.a.createElement(s.a,{onClick:this.doRefresh,style:{marginRight:20}},S.a.createElement(M.a,null)),S.a.createElement(f,{defaultValue:null,onChange:function(t){return e.setState({tag:t.target.value})}},S.a.createElement(E,{value:0},"全部"),a.length>0&&a.map(function(e){return S.a.createElement(E,{key:e.id,value:e.id},e.name)})),S.a.createElement(h,{defaultValue:v,className:F.a.extraContentSearch,placeholder:"请输入名或者命名空间搜索",onSearch:function(t){return e.setState({search:t})}})),N=function(t){var a=t.data,n=(a.name,a.startTime),r=a.endTime,l=a.status,c=a.namespaceId,s=a.duration;return S.a.createElement("div",{className:F.a.listContent},S.a.createElement("div",{className:F.a.listContentItem},e.getNamespaceTitle(c)),S.a.createElement("div",{className:F.a.listContentItem},S.a.createElement("span",null,"开始时间"),S.a.createElement(p.a,{placement:"top",title:s},S.a.createElement("p",null,n))),S.a.createElement("div",{className:F.a.listContentItem},S.a.createElement("span",null,"结束时间"),S.a.createElement("p",null,"-"===r?"0000-00-00 00:00:00":r)),S.a.createElement("div",{className:F.a.listContentItem},S.a.createElement(i.a,{type:"circle",percent:100,status:"RUNNING"===l?"success":"exception",strokeWidth:1,width:50,style:{width:180}})))},y=function(t){var a=t.item;return S.a.createElement(c.a,{overlay:"RUNNING"===a.status||void 0!==a.url?S.a.createElement(l.a,{onClick:function(t){return function(t,a){"stop"==t?m.a.confirm({title:"停止Flink任务",content:"确定停止Flink任务吗？",okText:"确认",cancelText:"取消",onOk:function(){return e.stopRunTerminal(a)}}):window.location.href=t}(t.key,a)}},"RUNNING"===a.status&&S.a.createElement(l.a.Item,{key:"stop"},"停止"),void 0!==a.url&&S.a.createElement(l.a.Item,{key:a.url},"连接")):S.a.createElement("span",null)},S.a.createElement("a",null,"更多 ",S.a.createElement(L.a,null)))};return S.a.createElement(S.a.Fragment,null,S.a.createElement("div",{className:F.a.standardList},S.a.createElement(r.a,{className:F.a.listCard,bordered:!1,title:"Flink Job",style:{marginTop:24},bodyStyle:{padding:"0 32px 40px 32px"},extra:g},S.a.createElement(n.a,{size:"large",rowKey:"id",loading:d,dataSource:this.getListContent(),renderItem:function(t){return S.a.createElement(n.a.Item,{actions:[S.a.createElement(p.a,{title:t.fullName,placement:"left"},S.a.createElement("a",{href:t.detailUrl,target:"_blank"},"详情")),S.a.createElement(y,{key:"more",item:t})]},S.a.createElement(n.a.Item.Meta,{title:S.a.createElement(p.a,{title:t.name,placement:"left"},S.a.createElement("a",{href:t.detailUrl,target:"_blank"},t.name.substring(0,U.a))),avatar:e.getNamespaceAvatar(t),description:S.a.createElement(p.a,{title:void 0!==t.info?t.info:""},S.a.createElement("span",null,void 0!==t.info?t.info.substring(0,U.a):"-"))}),S.a.createElement(N,{data:t}))}}))))}}]),a}(w.Component),O=j.a.create()(K);t.default=Object(D.connect)(function(e){var t=e.job,a=e.loading;return{listBasicList:t.list,namespaces:t.dependence,loading:a.models.namespace}})(O)}}]);