(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{103:function(e,t,a){e.exports=a(133)},133:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(21),l=a.n(o),c=(a(108),a(6)),i=a(7),s=a(9),u=a(8),m=a(10),p=a(172),d=a(24),f=a(93),g=a(41),h=a(13),b=a.n(h),y=a(16),v=a(11),E=a.n(v),j=a(12),k=a.n(j),O=a(169),x=a(170),w=a(161),N=window.location.origin,S=function(e,t){var a,n,r,o,l,c,i,s,u,m,p;return b.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:for(a=new URL(e,N),n=0,r=Object.entries(t);n<r.length;n++)o=r[n],l=Object(y.a)(o,2),c=l[0],i=l[1],a.searchParams.set(c,i);return d.next=4,b.a.awrap(fetch(a.toString()));case 4:return s=d.sent,d.next=7,b.a.awrap(s.json());case 7:if(u=d.sent,m=u.result,null===(p=u.error)){d.next=11;break}throw Error(p);case 11:return d.abrupt("return",m);case 12:case"end":return d.stop()}}))},C=function(){return S("/api/ray_config",{})},I=function(){return S("/api/node_info",{})},F=function(){return S("/api/raylet_info",{})},A=function(e,t){return S("/api/errors",{hostname:e,pid:null===t?"":t})},L=function(e,t){return S("/api/logs",{hostname:e,pid:null===t?"":t})},T=function(e,t,a){return S("/api/launch_profiling",{node_id:e,pid:t,duration:a})},_=function(e){return S("/api/check_profiling_status",{profiling_id:e})},D=function(e){return"".concat(N,"/speedscope/index.html#profileURL=").concat(encodeURIComponent("".concat(N,"/api/get_profiling_info?profiling_id=").concat(e)))},R=function(e,t,a){return S("/api/kill_actor",{actor_id:e,ip_address:t,port:a})},W=function(){return S("/api/tune_info",{})},M=function(){return S("/api/tune_availability",{})},B=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.lastUpdatedAt,n=e.error;return r.a.createElement("div",{className:t.root},null!==a&&r.a.createElement(w.a,{className:t.lastUpdated},"Last updated: ",new Date(a).toLocaleString()),null!==n&&r.a.createElement(w.a,{className:t.error},n))}}]),t}(r.a.Component),U=Object(d.b)((function(e){return{lastUpdatedAt:e.dashboard.lastUpdatedAt,error:e.dashboard.error}}))(k()((function(e){return E()({root:{marginTop:e.spacing(2)},lastUpdated:{color:e.palette.text.secondary,fontSize:"0.8125rem",textAlign:"center"},error:{color:e.palette.error.main,fontSize:"0.8125rem",textAlign:"center"}})}))(B)),P=a(64),z=a.n(P),H=a(56),V=a(68),q=a(162),J=a(87),G=a.n(J),K=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={expanded:!0,profiling:{}},a.setExpanded=function(e){return function(){a.setState({expanded:e})}},a.handleProfilingClick=function(e){return function(){var t,n,r;return b.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(-1===(t=a.props.actor).state){o.next=9;break}return o.next=4,b.a.awrap(T(t.nodeId,t.pid,e));case 4:return n=o.sent,a.setState((function(e){return{profiling:Object(V.a)({},e.profiling,Object(H.a)({},n,{startTime:Date.now(),latestResponse:null}))}})),r=function e(){var t;return b.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,b.a.awrap(_(n));case 2:t=r.sent,a.setState((function(e){return{profiling:Object(V.a)({},e.profiling,Object(H.a)({},n,Object(V.a)({},e.profiling[n],{latestResponse:t})))}})),"pending"===t.status&&setTimeout(e,1e3);case 5:case"end":return r.stop()}}))},o.next=9,b.a.awrap(r());case 9:case"end":return o.stop()}}))}},a.killActor=function(){var e=a.props.actor;0===e.state&&R(e.actorId,e.ipAddress,e.port)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.actor,o=this.state,l=o.expanded,c=o.profiling,i=-1!==n.state?[{label:"ActorTitle",value:n.actorTitle},{label:"State",value:n.state.toLocaleString()},{label:"Resources",value:Object.entries(n.usedResources).length>0&&Object.entries(n.usedResources).sort((function(e,t){return e[0].localeCompare(t[0])})).map((function(e){var t=Object(y.a)(e,2),a=t[0],n=t[1];return"".concat(n.toLocaleString()," ").concat(a)})).join(", ")},{label:"Pending",value:n.taskQueueLength.toLocaleString()},{label:"Executed",value:n.numExecutedTasks.toLocaleString()},{label:"NumObjectIdsInScope",value:n.numObjectIdsInScope.toLocaleString()},{label:"NumLocalObjects",value:n.numLocalObjects.toLocaleString()},{label:"UsedLocalObjectMemory",value:n.usedObjectStoreMemory.toLocaleString()}]:[{label:"ID",value:n.actorId},{label:"Required resources",value:Object.entries(n.requiredResources).length>0&&Object.entries(n.requiredResources).sort((function(e,t){return e[0].localeCompare(t[0])})).map((function(e){var t=Object(y.a)(e,2),a=t[0],n=t[1];return"".concat(n.toLocaleString()," ").concat(a)})).join(", ")}],s=[];return-1!==n.state&&n.webuiDisplay&&(s=Object.keys(n.webuiDisplay).sort().map((function(e,t,o){var l=n.webuiDisplay[e],c=JSON.parse(l),i=c.message;return"html"===c.dtype&&(i=r.a.createElement("div",{className:a.inlineHTML,dangerouslySetInnerHTML:{__html:i}})),""===e?r.a.createElement(w.a,{className:a.webuiDisplay},"\xa0 \xa0 ",i):r.a.createElement(w.a,{className:a.webuiDisplay},"\xa0 \xa0 ",e,": ",i)}))),r.a.createElement("div",{className:a.root},r.a.createElement(w.a,{className:a.title},-1!==n.state?r.a.createElement(r.a.Fragment,null,"Actor ",n.actorId," ",Object.entries(n.children).length>0&&r.a.createElement(r.a.Fragment,null,"(",r.a.createElement("span",{className:a.action,onClick:this.setExpanded(!l)},l?"Collapse":"Expand"),")")," ","(Profile for",[10,30,60].map((function(t){return r.a.createElement(r.a.Fragment,null," ",r.a.createElement("span",{className:a.action,onClick:e.handleProfilingClick(t)},t,"s"))})),")"," ",0===n.state?r.a.createElement("span",{className:a.action,onClick:this.killActor},"Kill Actor"):"",Object.entries(c).map((function(e){var t=Object(y.a)(e,2),n=t[0],o=t[1],l=o.startTime,c=o.latestResponse;return null!==c&&r.a.createElement(r.a.Fragment,null,"(","pending"===c.status?"Profiling for ".concat(Math.round((Date.now()-l)/1e3),"s..."):"finished"===c.status?r.a.createElement("a",{className:a.action,href:D(n),rel:"noopener noreferrer",target:"_blank"},"Profiling result"):"error"===c.status?"Profiling error: ".concat(c.error.trim()):void 0,")"," ")}))):"infeasibleActor"===n.invalidStateType?r.a.createElement("span",{className:a.invalidStateTypeInfeasible},n.actorTitle," is infeasible. (This actor cannot be created because the Ray cluster cannot satisfy its resource requirements.)"):r.a.createElement("span",{className:a.invalidStateTypePendingActor},n.actorTitle," is pending until resources are available.")),r.a.createElement(w.a,{className:a.information},i.map((function(e){var t=e.label,n=e.value;return n&&n.length>0&&r.a.createElement(r.a.Fragment,{key:t},r.a.createElement("span",{className:a.datum},t,": ",n)," ")}))),-1!==n.state&&r.a.createElement(r.a.Fragment,null,s.length>0&&r.a.createElement(r.a.Fragment,null,s),r.a.createElement(q.a,{in:l},r.a.createElement(Y,{actors:n.children}))))}}]),t}(r.a.Component),Q=k()((function(e){return E()({root:{borderColor:e.palette.divider,borderStyle:"solid",borderWidth:1,marginTop:e.spacing(2),padding:e.spacing(2)},title:{color:e.palette.text.secondary,fontSize:"0.75rem"},action:{color:e.palette.primary.main,textDecoration:"none","&:hover":{cursor:"pointer"}},invalidStateTypeInfeasible:{color:e.palette.error.main},invalidStateTypePendingActor:{color:G.a[500]},information:{fontSize:"0.875rem"},datum:{"&:not(:first-child)":{marginLeft:e.spacing(2)}},webuiDisplay:{fontSize:"0.875rem"},inlineHTML:{fontSize:"0.875rem",display:"inline"}})}))(K),X=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.actors;return Object.entries(e).map((function(e){var t=Object(y.a)(e,2),a=t[0],n=t[1];return r.a.createElement(Q,{actor:n,key:a})}))}}]),t}(r.a.Component),Y=k()((function(e){return E()({})}))(X),Z=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.rayletInfo;return r.a.createElement("div",null,r.a.createElement(w.a,{className:t.warning,color:"textSecondary"},r.a.createElement(z.a,{className:t.warningIcon})," Note: This tab is experimental."),null===a?r.a.createElement(w.a,{color:"textSecondary"},"Loading..."):0===Object.entries(a.actors).length?r.a.createElement(w.a,{color:"textSecondary"},"No actors found."):r.a.createElement(Y,{actors:a.actors}))}}]),t}(r.a.Component),$=Object(d.b)((function(e){return{rayletInfo:e.dashboard.rayletInfo}}))(k()((function(e){return E()({warning:{fontSize:"0.8125rem",marginBottom:e.spacing(2)},warningIcon:{fontSize:"1.25em",verticalAlign:"text-bottom"}})}))(Z)),ee=a(164),te=a(165),ae=a(167),ne=a(168),re=a(166),oe=a(55),le=a(171),ce=a(163),ie=a(88),se=a.n(ie),ue=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.handleClose,n=e.title;return r.a.createElement(le.a,{classes:{paper:t.paper},fullWidth:!0,maxWidth:"md",onClose:a,open:!0,scroll:"body"},r.a.createElement(ce.a,{className:t.closeButton,onClick:a},r.a.createElement(se.a,null)),r.a.createElement(w.a,{className:t.title},n),this.props.children)}}]),t}(r.a.Component),me=k()((function(e){return E()({paper:{padding:e.spacing(3)},closeButton:{position:"absolute",right:e.spacing(1.5),top:e.spacing(1.5),zIndex:1},title:{borderBottomColor:e.palette.divider,borderBottomStyle:"solid",borderBottomWidth:1,fontSize:"1.5rem",lineHeight:1,marginBottom:e.spacing(3),paddingBottom:e.spacing(3)}})}))(ue),pe=a(40),de=a.n(pe),fe=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.lines;return r.a.createElement(ee.a,null,r.a.createElement(te.a,null,a.map((function(e,a){return r.a.createElement(re.a,{key:a},r.a.createElement(ae.a,{className:de()(t.cell,t.lineNumber),"data-line-number":a+1}),r.a.createElement(ae.a,{className:de()(t.cell,t.line)},e))}))))}}]),t}(r.a.Component),ge=k()((function(e){return E()({root:{overflowX:"auto"},cell:{borderWidth:0,fontFamily:"SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace",padding:0,"&:last-child":{paddingRight:0}},lineNumber:{color:e.palette.text.secondary,paddingRight:e.spacing(2),textAlign:"right",verticalAlign:"top",width:"1%","&::before":{content:"attr(data-line-number)"}},line:{textAlign:"left",whiteSpace:"pre-wrap"}})}))(fe),he=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={result:null,error:null},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e,t,a,n;return b.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,e=this.props,t=e.hostname,a=e.pid,r.next=4,b.a.awrap(A(t,a));case 4:n=r.sent,this.setState({result:n,error:null}),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),this.setState({result:null,error:r.t0.toString()});case 11:case"end":return r.stop()}}),null,this,[[0,8]])}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.clearErrorDialog,n=e.hostname,o=this.state,l=o.result,c=o.error;return r.a.createElement(me,{handleClose:a,title:"Errors"},null!==c?r.a.createElement(w.a,{color:"error"},c):null===l?r.a.createElement(w.a,{color:"textSecondary"},"Loading..."):Object.entries(l).map((function(e){var a=Object(y.a)(e,2),o=a[0],l=a[1];return r.a.createElement(r.a.Fragment,{key:o},r.a.createElement(w.a,{className:t.header},n," (PID: ",o,")"),l.length>0?l.map((function(e,a){var n=e.message,o=e.timestamp;return r.a.createElement("div",{className:t.error,key:a},r.a.createElement(w.a,{className:t.timestamp},"Error at ",new Date(1e3*o).toLocaleString()),r.a.createElement(ge,{lines:n.trim().split("\n")}))})):r.a.createElement(w.a,{color:"textSecondary"},"No errors found."))})))}}]),t}(r.a.Component),be=k()((function(e){return E()({header:{lineHeight:1,marginBottom:e.spacing(3),marginTop:e.spacing(3)},error:{backgroundColor:Object(oe.fade)(e.palette.error.main,.04),borderLeftColor:e.palette.error.main,borderLeftStyle:"solid",borderLeftWidth:2,marginTop:e.spacing(3),padding:e.spacing(2)},timestamp:{color:e.palette.text.secondary,marginBottom:e.spacing(1)}})}))(he),ye=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={result:null,error:null},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e,t,a,n;return b.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,e=this.props,t=e.hostname,a=e.pid,r.next=4,b.a.awrap(L(t,a));case 4:n=r.sent,this.setState({result:n,error:null}),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),this.setState({result:null,error:r.t0.toString()});case 11:case"end":return r.stop()}}),null,this,[[0,8]])}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.clearLogDialog,n=e.hostname,o=this.state,l=o.result,c=o.error;return r.a.createElement(me,{handleClose:a,title:"Logs"},null!==c?r.a.createElement(w.a,{color:"error"},c):null===l?r.a.createElement(w.a,{color:"textSecondary"},"Loading..."):Object.entries(l).map((function(e){var a=Object(y.a)(e,2),o=a[0],l=a[1];return r.a.createElement(r.a.Fragment,{key:o},r.a.createElement(w.a,{className:t.header},n," (PID: ",o,")"),l.length>0?r.a.createElement("div",{className:t.log},r.a.createElement(ge,{lines:l})):r.a.createElement(w.a,{color:"textSecondary"},"No logs found."))})))}}]),t}(r.a.Component),ve=k()((function(e){return E()({header:{lineHeight:1,marginBottom:e.spacing(3),marginTop:e.spacing(3)},log:{backgroundColor:Object(oe.fade)(e.palette.primary.main,.04),borderLeftColor:e.palette.primary.main,borderLeftStyle:"solid",borderLeftWidth:2,padding:e.spacing(2)}})}))(ye),Ee=a(89),je=a.n(Ee),ke=a(90),Oe=a.n(ke),xe=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.text,n=this.props.percent;n=Math.max(n,0);var o=[0,255,0],l=o,c=function(e,t,a){var n=Object(y.a)(e,3),r=n[0],o=n[1],l=n[2],c=Object(y.a)(t,3);return[r*(1-a)+c[0]*a,o*(1-a)+c[1]*a,l*(1-a)+c[2]*a]}(o,[255,0,0],(n=Math.min(n,100))/100),i="\n      linear-gradient(\n        to right,\n        rgba(".concat(l.join(","),", ").concat(.2,") 0%,\n        rgba(").concat(c.join(","),", ").concat(.2,") ").concat(n,"%,\n        transparent ").concat(n,"%\n      )\n    ");return r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.inner,style:{background:i}},a))}}]),t}(r.a.Component),we=k()((function(e){return E()({root:{borderColor:e.palette.divider,borderStyle:"solid",borderWidth:1},inner:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}})}))(xe),Ne=function(e){var t=function(e){if(0===e.length)return 0;var t=0,a=0,n=!0,r=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var i=l.value,s=i.weight;t+=s*i.value,a+=s}}catch(u){r=!0,o=u}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return t/a}(e.nodes.map((function(e){return{weight:e.cpus[0],value:e.cpu}})));return r.a.createElement("div",{style:{minWidth:60}},r.a.createElement(we,{percent:t,text:"".concat(t.toFixed(1),"%")}))},Se=function(e){var t=e.node;return r.a.createElement("div",{style:{minWidth:60}},r.a.createElement(we,{percent:t.cpu,text:"".concat(t.cpu.toFixed(1),"%")}))},Ce=function(e){var t=e.worker;return r.a.createElement("div",{style:{minWidth:60}},r.a.createElement(we,{percent:t.cpu_percent,text:"".concat(t.cpu_percent.toFixed(1),"%")}))},Ie=function(e,t){return"".concat((e/("mebibyte"===t?Math.pow(1024,2):Math.pow(1024,3))).toFixed(1)," ").concat("mebibyte"===t?"MiB":"GiB")},Fe=function(e,t,a){var n=Ie(e,a),r=Ie(t,a),o=100*e/t;return"".concat(n," / ").concat(r," (").concat(o.toFixed(0),"%)")},Ae=function(e){var t=Math.floor(e)%60,a=Math.floor(e/60)%60,n=Math.floor(e/60/60)%24,r=Math.floor(e/60/60/24),o=function(e){return e.toString().padStart(2,"0")};return[r?"".concat(r,"d"):"","".concat(o(n),"h"),"".concat(o(a),"m"),"".concat(o(t),"s")].join(" ")},Le=function(e){var t=e.nodes,a=0,n=0,o=!0,l=!1,c=void 0;try{for(var i,s=t[Symbol.iterator]();!(o=(i=s.next()).done);o=!0){var u=i.value;a+=u.disk["/"].used,n+=u.disk["/"].total}}catch(m){l=!0,c=m}finally{try{o||null==s.return||s.return()}finally{if(l)throw c}}return r.a.createElement(we,{percent:100*a/n,text:Fe(a,n,"gibibyte")})},Te=function(e){var t=e.node;return r.a.createElement(we,{percent:100*t.disk["/"].used/t.disk["/"].total,text:Fe(t.disk["/"].used,t.disk["/"].total,"gibibyte")})},_e=function(){return r.a.createElement(w.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A")},De=a(95),Re=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=Object(De.a)(e,["classes"]);return r.a.createElement("span",Object.assign({className:t.button},a))}}]),t}(r.a.Component),We=k()((function(e){return E()({button:{color:e.palette.primary.main,"&:hover":{cursor:"pointer",textDecoration:"underline"}}})}))(Re),Me=function(e){return function(t){var a=t.nodes,n=0,o=!0,l=!1,c=void 0;try{for(var i,s=a[Symbol.iterator]();!(o=(i=s.next()).done);o=!0){var u=i.value;u.ip in e&&(n+=e[u.ip].total)}}catch(m){l=!0,c=m}finally{try{o||null==s.return||s.return()}finally{if(l)throw c}}return 0===n?r.a.createElement(w.a,{color:"textSecondary",component:"span",variant:"inherit"},"No errors"):r.a.createElement(r.a.Fragment,null,n.toLocaleString()," ",1===n?"error":"errors")}},Be=function(e,t){return function(a){var n=a.node;return 0===e.total?r.a.createElement(w.a,{color:"textSecondary",component:"span",variant:"inherit"},"No errors"):r.a.createElement(We,{onClick:function(){return t(n.hostname,null)}},"View all errors (",e.total.toLocaleString(),")")}},Ue=function(e,t){return function(a){var n=a.node,o=a.worker;return 0===e.perWorker[o.pid]?r.a.createElement(w.a,{color:"textSecondary",component:"span",variant:"inherit"},"No errors"):r.a.createElement(We,{onClick:function(){return t(n.hostname,o.pid)}},"View errors (",e.perWorker[o.pid].toLocaleString(),")")}},Pe=function(e){var t=e.nodes;return r.a.createElement(r.a.Fragment,null,"Totals (",t.length.toLocaleString()," ",1===t.length?"host":"hosts",")")},ze=function(e){var t=e.node;return r.a.createElement(r.a.Fragment,null,t.hostname," (",t.ip,")")},He=function(e){var t=e.worker;return r.a.createElement(r.a.Fragment,null,t.cmdline[0].split("::",2)[0]," (PID: ",t.pid,")")},Ve=function(e){return function(t){var a=t.nodes,n=0,o=!0,l=!1,c=void 0;try{for(var i,s=a[Symbol.iterator]();!(o=(i=s.next()).done);o=!0){var u=i.value;u.ip in e&&(n+=e[u.ip].total)}}catch(m){l=!0,c=m}finally{try{o||null==s.return||s.return()}finally{if(l)throw c}}return 0===n?r.a.createElement(w.a,{color:"textSecondary",component:"span",variant:"inherit"},"No logs"):r.a.createElement(r.a.Fragment,null,n.toLocaleString()," ",1===n?"line":"lines")}},qe=function(e,t){return function(a){var n=a.node;return 0===e.total?r.a.createElement(w.a,{color:"textSecondary",component:"span",variant:"inherit"},"No logs"):r.a.createElement(We,{onClick:function(){return t(n.hostname,null)}},"View all logs (",e.total.toLocaleString()," ",1===e.total?"line":"lines",")")}},Je=function(e,t){return function(a){var n=a.node,o=a.worker;return 0===e.perWorker[o.pid]?r.a.createElement(w.a,{color:"textSecondary",component:"span",variant:"inherit"},"No logs"):r.a.createElement(We,{onClick:function(){return t(n.hostname,o.pid)}},"View log (",e.perWorker[o.pid].toLocaleString()," ",1===e.perWorker[o.pid]?"line":"lines",")")}},Ge=function(e){var t=e.nodes,a=0,n=0,o=!0,l=!1,c=void 0;try{for(var i,s=t[Symbol.iterator]();!(o=(i=s.next()).done);o=!0){var u=i.value;a+=u.mem[0]-u.mem[1],n+=u.mem[0]}}catch(m){l=!0,c=m}finally{try{o||null==s.return||s.return()}finally{if(l)throw c}}return r.a.createElement(we,{percent:100*a/n,text:Fe(a,n,"gibibyte")})},Ke=function(e){var t=e.node;return r.a.createElement(we,{percent:100*(t.mem[0]-t.mem[1])/t.mem[0],text:Fe(t.mem[0]-t.mem[1],t.mem[0],"gibibyte")})},Qe=function(e){var t=e.node,a=e.worker;return r.a.createElement(we,{percent:100*a.memory_info.rss/t.mem[0],text:Ie(a.memory_info.rss,"mebibyte")})},Xe=function(e){var t=e.nodes,a=0,n=!0,o=!1,l=void 0;try{for(var c,i=t[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){a+=c.value.net[1]}}catch(s){o=!0,l=s}finally{try{n||null==i.return||i.return()}finally{if(o)throw l}}return r.a.createElement(r.a.Fragment,null,Ie(a,"mebibyte"),"/s")},Ye=function(e){var t=e.node;return r.a.createElement(r.a.Fragment,null,Ie(t.net[1],"mebibyte"),"/s")},Ze=function(){return r.a.createElement(w.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A")},$e=function(e){var t=e.nodes,a=0,n=!0,o=!1,l=void 0;try{for(var c,i=t[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){a+=c.value.net[0]}}catch(s){o=!0,l=s}finally{try{n||null==i.return||i.return()}finally{if(o)throw l}}return r.a.createElement(r.a.Fragment,null,Ie(a,"mebibyte"),"/s")},et=function(e){var t=e.node;return r.a.createElement(r.a.Fragment,null,Ie(t.net[0],"mebibyte"),"/s")},tt=function(){return r.a.createElement(w.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A")},at=function(e){return Date.now()/1e3-e},nt=function(e){e.nodes;return r.a.createElement(w.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A")},rt=function(e){var t=e.node;return r.a.createElement(r.a.Fragment,null,Ae(at(t.boot_time)))},ot=function(e){var t=e.worker;return r.a.createElement(r.a.Fragment,null,Ae(at(t.create_time)))},lt=function(e){var t=e.nodes,a=0,n=0,o=!0,l=!1,c=void 0;try{for(var i,s=t[Symbol.iterator]();!(o=(i=s.next()).done);o=!0){var u=i.value;a+=u.workers.length,n+=u.cpus[0]}}catch(m){l=!0,c=m}finally{try{o||null==s.return||s.return()}finally{if(l)throw c}}return r.a.createElement(r.a.Fragment,null,a.toLocaleString()," ",1===a?"worker":"workers"," / ",n.toLocaleString()," ",1===n?"core":"cores")},ct=function(e){var t=e.node,a=t.workers.length,n=t.cpus[0];return r.a.createElement(r.a.Fragment,null,a.toLocaleString()," ",1===a?"worker":"workers"," /"," ",n.toLocaleString()," ",1===n?"core":"cores")},it=function(e){var t=e.worker;return r.a.createElement(r.a.Fragment,null,t.cmdline[0].split("::",2)[1])},st=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={expanded:a.props.initialExpanded},a.toggleExpand=function(){a.setState((function(e){return{expanded:!e.expanded}}))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.node,n=e.raylet,o=e.logCounts,l=e.errorCounts,c=e.setLogDialog,i=e.setErrorDialog,s=this.state.expanded,u=[{NodeFeature:ze,WorkerFeature:He},{NodeFeature:ct,WorkerFeature:it},{NodeFeature:rt,WorkerFeature:ot},{NodeFeature:Se,WorkerFeature:Ce},{NodeFeature:Ke,WorkerFeature:Qe},{NodeFeature:Te,WorkerFeature:_e},{NodeFeature:et,WorkerFeature:tt},{NodeFeature:Ye,WorkerFeature:Ze},{NodeFeature:qe(o,c),WorkerFeature:Je(o,c)},{NodeFeature:Be(l,i),WorkerFeature:Ue(l,i)}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(re.a,{hover:!0},r.a.createElement(ae.a,{className:de()(t.cell,t.expandCollapseCell),onClick:this.toggleExpand},s?r.a.createElement(Oe.a,{className:t.expandCollapseIcon}):r.a.createElement(je.a,{className:t.expandCollapseIcon})),u.map((function(e,n){var o=e.NodeFeature;return r.a.createElement(ae.a,{className:t.cell,key:n},r.a.createElement(o,{node:a}))}))),s&&r.a.createElement(r.a.Fragment,null,null!==n&&void 0!==n.extraInfo&&r.a.createElement(re.a,{hover:!0},r.a.createElement(ae.a,{className:t.cell}),r.a.createElement(ae.a,{className:de()(t.cell,t.extraInfo),colSpan:u.length},n.extraInfo)),a.workers.map((function(e,n){return r.a.createElement(re.a,{hover:!0,key:n},r.a.createElement(ae.a,{className:t.cell}),u.map((function(n,o){var l=n.WorkerFeature;return r.a.createElement(ae.a,{className:t.cell,key:o},r.a.createElement(l,{node:a,worker:e}))})))}))))}}]),t}(r.a.Component),ut=k()((function(e){return E()({cell:{padding:e.spacing(1),textAlign:"center","&:last-child":{paddingRight:e.spacing(1)}},expandCollapseCell:{cursor:"pointer"},expandCollapseIcon:{color:e.palette.text.secondary,fontSize:"1.5em",verticalAlign:"middle"},extraInfo:{fontFamily:"SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace",whiteSpace:"pre"}})}))(st),mt=a(91),pt=a.n(mt),dt=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.nodes,n=e.logCounts,o=e.errorCounts,l=[{ClusterFeature:Pe},{ClusterFeature:lt},{ClusterFeature:nt},{ClusterFeature:Ne},{ClusterFeature:Ge},{ClusterFeature:Le},{ClusterFeature:$e},{ClusterFeature:Xe},{ClusterFeature:Ve(n)},{ClusterFeature:Me(o)}];return r.a.createElement(re.a,{hover:!0},r.a.createElement(ae.a,{className:t.cell},r.a.createElement(pt.a,{className:t.totalIcon})),l.map((function(e,n){var o=e.ClusterFeature;return r.a.createElement(ae.a,{className:t.cell,key:n},r.a.createElement(o,{nodes:a}))})))}}]),t}(r.a.Component),ft=k()((function(e){return E()({cell:{borderTopColor:e.palette.divider,borderTopStyle:"solid",borderTopWidth:2,padding:e.spacing(1),textAlign:"center","&:last-child":{paddingRight:e.spacing(1)}},totalIcon:{color:e.palette.text.secondary,fontSize:"1.5em",verticalAlign:"middle"}})}))(dt),gt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={logDialog:null,errorDialog:null},a.setLogDialog=function(e,t){a.setState({logDialog:{hostname:e,pid:t}})},a.clearLogDialog=function(){a.setState({logDialog:null})},a.setErrorDialog=function(e,t){a.setState({errorDialog:{hostname:e,pid:t}})},a.clearErrorDialog=function(){a.setState({errorDialog:null})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.nodeInfo,o=t.rayletInfo,l=this.state,c=l.logDialog,i=l.errorDialog;if(null===n||null===o)return r.a.createElement(w.a,{color:"textSecondary"},"Loading...");var s={},u={},m=!0,p=!1,d=void 0;try{for(var f,g=n.clients[Symbol.iterator]();!(m=(f=g.next()).done);m=!0){var h=f.value;s[h.ip]={perWorker:{},total:0},u[h.ip]={perWorker:{},total:0};var b=!0,v=!1,E=void 0;try{for(var j,k=h.workers[Symbol.iterator]();!(b=(j=k.next()).done);b=!0){var O=j.value;s[h.ip].perWorker[O.pid]=0,u[h.ip].perWorker[O.pid]=0}}catch(H){v=!0,E=H}finally{try{b||null==k.return||k.return()}finally{if(v)throw E}}}}catch(H){p=!0,d=H}finally{try{m||null==g.return||g.return()}finally{if(p)throw d}}for(var x=0,N=Object.keys(n.log_counts);x<N.length;x++){var S=N[x];if(S in s)for(var C=0,I=Object.entries(n.log_counts[S]);C<I.length;C++){var F=I[C],A=Object(y.a)(F,2),L=A[0],T=A[1];s[S].perWorker[L]=T,s[S].total+=T}}for(var _=0,D=Object.keys(n.error_counts);_<D.length;_++){var R=D[_];if(R in u)for(var W=0,M=Object.entries(n.error_counts[R]);W<M.length;W++){var B=M[W],U=Object(y.a)(B,2),P=U[0],z=U[1];u[R].perWorker[P]=z,u[R].total+=z}}return r.a.createElement(r.a.Fragment,null,r.a.createElement(ee.a,{className:a.table},r.a.createElement(ne.a,null,r.a.createElement(re.a,null,r.a.createElement(ae.a,{className:a.cell}),r.a.createElement(ae.a,{className:a.cell},"Host"),r.a.createElement(ae.a,{className:a.cell},"Workers"),r.a.createElement(ae.a,{className:a.cell},"Uptime"),r.a.createElement(ae.a,{className:a.cell},"CPU"),r.a.createElement(ae.a,{className:a.cell},"RAM"),r.a.createElement(ae.a,{className:a.cell},"Disk"),r.a.createElement(ae.a,{className:a.cell},"Sent"),r.a.createElement(ae.a,{className:a.cell},"Received"),r.a.createElement(ae.a,{className:a.cell},"Logs"),r.a.createElement(ae.a,{className:a.cell},"Errors"))),r.a.createElement(te.a,null,n.clients.map((function(t){return r.a.createElement(ut,{key:t.ip,node:t,raylet:t.ip in o.nodes?o.nodes[t.ip]:null,logCounts:s[t.ip],errorCounts:u[t.ip],setLogDialog:e.setLogDialog,setErrorDialog:e.setErrorDialog,initialExpanded:n.clients.length<=1})})),r.a.createElement(ft,{nodes:n.clients,logCounts:s,errorCounts:u}))),null!==c&&r.a.createElement(ve,{clearLogDialog:this.clearLogDialog,hostname:c.hostname,pid:c.pid}),null!==i&&r.a.createElement(be,{clearErrorDialog:this.clearErrorDialog,hostname:i.hostname,pid:i.pid}))}}]),t}(r.a.Component),ht=Object(d.b)((function(e){return{nodeInfo:e.dashboard.nodeInfo,rayletInfo:e.dashboard.rayletInfo}}))(k()((function(e){return E()({table:{marginTop:e.spacing(1)},cell:{padding:e.spacing(1),textAlign:"center","&:last-child":{paddingRight:e.spacing(1)}}})}))(gt)),bt=a(67),yt=Object(bt.b)({name:"dashboard",initialState:{tab:0,rayConfig:null,nodeInfo:null,rayletInfo:null,tuneInfo:null,tuneAvailability:!1,lastUpdatedAt:null,error:null},reducers:{setTab:function(e,t){e.tab=t.payload},setRayConfig:function(e,t){e.rayConfig=t.payload},setNodeAndRayletInfo:function(e,t){e.nodeInfo=t.payload.nodeInfo,e.rayletInfo=t.payload.rayletInfo,e.lastUpdatedAt=Date.now()},setTuneInfo:function(e,t){e.tuneInfo=t.payload.tuneInfo,e.lastUpdatedAt=Date.now()},setTuneAvailability:function(e,t){e.tuneAvailability=t.payload.tuneAvailability.available,e.lastUpdatedAt=Date.now()},setError:function(e,t){e.error=t.payload}}}),vt=yt.actions,Et=yt.reducer,jt=vt,kt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).refreshRayConfig=function(){var e;return b.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.awrap(C());case 3:e=t.sent,a.props.setRayConfig(e),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:return t.prev=9,setTimeout(a.refreshRayConfig,1e4),t.finish(9);case 12:case"end":return t.stop()}}),null,null,[[0,7,9,12]])},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.awrap(this.refreshRayConfig());case 2:case"end":return e.stop()}}),null,this)}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.rayConfig;if(null===a)return r.a.createElement(w.a,{color:"textSecondary"},"No Ray configuration detected.");var n=[{key:"Autoscaling mode",value:a.autoscaling_mode},{key:"Head node type",value:a.head_type},{key:"Worker node type",value:a.worker_type},{key:"Min worker nodes",value:a.min_workers},{key:"Initial worker nodes",value:a.initial_workers},{key:"Max worker nodes",value:a.max_workers},{key:"Idle timeout",value:"".concat(a.idle_timeout_minutes," ").concat(1===a.idle_timeout_minutes?"minute":"minutes")}];return r.a.createElement("div",null,r.a.createElement(w.a,null,"Ray cluster configuration:"),r.a.createElement(ee.a,{className:t.table},r.a.createElement(ne.a,null,r.a.createElement(re.a,null,r.a.createElement(ae.a,{className:t.cell},"Setting"),r.a.createElement(ae.a,{className:t.cell},"Value"))),r.a.createElement(te.a,null,n.map((function(e,a){var n=e.key,o=e.value;return r.a.createElement(re.a,{key:a},r.a.createElement(ae.a,{className:de()(t.cell,t.key)},n),r.a.createElement(ae.a,{className:t.cell},o))})))))}}]),t}(r.a.Component),Ot=Object(d.b)((function(e){return{rayConfig:e.dashboard.rayConfig}}),jt)(k()((function(e){return E()({table:{marginTop:e.spacing(1),width:"auto"},cell:{paddingTop:e.spacing(1),paddingBottom:e.spacing(1),paddingLeft:e.spacing(3),paddingRight:e.spacing(3),textAlign:"center","&:last-child":{paddingRight:e.spacing(3)}},key:{color:e.palette.text.secondary}})}))(kt)),xt=vt,wt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).timeout=0,a.refreshTuneInfo=function(){var e,t,n;return b.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,b.a.awrap(Promise.all([W()]));case 3:e=r.sent,t=Object(y.a)(e,1),n=t[0],a.props.setTuneInfo({tuneInfo:n}),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),a.props.setError(r.t0.toString());case 12:return r.prev=12,a.timeout=window.setTimeout(a.refreshTuneInfo,1e3),r.finish(12);case 15:case"end":return r.stop()}}),null,null,[[0,9,12,15]])},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.awrap(this.refreshTuneInfo());case 2:case"end":return e.stop()}}),null,this)}},{key:"componentWillUnmount",value:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:window.clearTimeout(this.timeout);case 1:case"end":return e.stop()}}),null,this)}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.tuneInfo;if(null===a||0===Object.keys(a.trial_records).length)return null;var n=Object.keys(a.trial_records)[0],o=[];if(null!==a){var l=a.trial_records[n].params;o=Object.keys(l).filter((function(e){return"args"!==e}))}var c=Object.keys(a.trial_records[n].metrics);return r.a.createElement("div",{className:t.root},r.a.createElement(w.a,{className:t.warning,color:"textSecondary"},r.a.createElement(z.a,{className:t.warningIcon})," Note: This tab is experimental."),r.a.createElement(ee.a,{className:t.table},r.a.createElement(ne.a,null,r.a.createElement(re.a,null,r.a.createElement(ae.a,{className:t.cell},"Trial ID"),r.a.createElement(ae.a,{className:t.cell},"Job ID"),r.a.createElement(ae.a,{className:t.cell},"Start Time"),o.map((function(e,a){return r.a.createElement(ae.a,{className:t.cell,key:e},e)})),r.a.createElement(ae.a,{className:t.cell},"Status"),c.map((function(e,a){return r.a.createElement(ae.a,{className:t.cell,key:e},e)})))),r.a.createElement(te.a,null,null!=a&&Object.keys(a.trial_records).map((function(e){return r.a.createElement(re.a,{key:e},r.a.createElement(ae.a,{className:t.cell},a.trial_records[e].trial_id),r.a.createElement(ae.a,{className:t.cell},a.trial_records[e].job_id),r.a.createElement(ae.a,{className:t.cell},a.trial_records[e].start_time),o.map((function(n,o){return r.a.createElement(ae.a,{className:t.cell,key:n},a.trial_records[e].params[n])})),r.a.createElement(ae.a,{className:t.cell},a.trial_records[e].status),a.trial_records[e].metrics&&c.map((function(n,o){return r.a.createElement(ae.a,{className:t.cell,key:n},a.trial_records[e].metrics[n])})))})))))}}]),t}(r.a.Component),Nt=Object(d.b)((function(e){return{tuneInfo:e.dashboard.tuneInfo}}),xt)(k()((function(e){return E()({root:{padding:e.spacing(2),"& > :not(:first-child)":{marginTop:e.spacing(2)}},table:{marginTop:e.spacing(1)},cell:{padding:e.spacing(1),textAlign:"center","&:last-child":{paddingRight:e.spacing(1)}},warning:{fontSize:"0.8125rem",marginBottom:e.spacing(2)},warningIcon:{fontSize:"1.25em",verticalAlign:"text-bottom"}})}))(wt)),St=vt,Ct=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).timeoutId=0,a.refreshNodeAndRayletInfo=function(){var e,t,n,r,o;return b.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,b.a.awrap(Promise.all([I(),F(),M()]));case 3:e=l.sent,t=Object(y.a)(e,3),n=t[0],r=t[1],o=t[2],a.props.setNodeAndRayletInfo({nodeInfo:n,rayletInfo:r}),a.props.setTuneAvailability({tuneAvailability:o}),a.props.setError(null),l.next=16;break;case 13:l.prev=13,l.t0=l.catch(0),a.props.setError(l.t0.toString());case 16:return l.prev=16,a.timeoutId=window.setTimeout(a.refreshNodeAndRayletInfo,1e3),l.finish(16);case 19:case"end":return l.stop()}}),null,null,[[0,13,16,19]])},a.handleTabChange=function(e,t){a.props.setTab(t)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.awrap(this.refreshNodeAndRayletInfo());case 2:case"end":return e.stop()}}),null,this)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeoutId)}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.tab,n=e.tuneAvailability,o=[{label:"Machine view",component:ht},{label:"Logical view",component:$},{label:"Ray config",component:Ot},{label:"Tune",component:Nt}];n||o.splice(3);var l=o[a].component;return r.a.createElement("div",{className:t.root},r.a.createElement(w.a,{variant:"h5"},"Ray Dashboard"),r.a.createElement(x.a,{className:t.tabs,indicatorColor:"primary",onChange:this.handleTabChange,textColor:"primary",value:a},o.map((function(e){var t=e.label;return r.a.createElement(O.a,{key:t,label:t})}))),r.a.createElement(l,null),r.a.createElement(U,null))}}]),t}(r.a.Component),It=Object(d.b)((function(e){return{tab:e.dashboard.tab,tuneAvailability:e.dashboard.tuneAvailability}}),St)(k()((function(e){return E()({root:{backgroundColor:e.palette.background.paper,padding:e.spacing(2),"& > :not(:first-child)":{marginTop:e.spacing(4)}},tabs:{borderBottomColor:e.palette.divider,borderBottomStyle:"solid",borderBottomWidth:1}})}))(Ct)),Ft=Object(bt.a)({reducer:{dashboard:Et},devTools:!1}),At=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,{store:Ft},r.a.createElement(f.a,null,r.a.createElement(p.a,null),r.a.createElement(g.a,{component:It,exact:!0,path:"/"})))}}]),t}(r.a.Component);l.a.render(r.a.createElement(At,null),document.getElementById("root"))}},[[103,1,2]]]);
//# sourceMappingURL=main.6a5dd6cf.chunk.js.map